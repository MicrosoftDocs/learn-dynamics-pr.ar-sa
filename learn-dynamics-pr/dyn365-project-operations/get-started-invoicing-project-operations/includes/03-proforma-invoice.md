---
ms.openlocfilehash: 95eefa578d46ed0e32886e0455002ef09f14db3fe278c1e1ef0e92f58121e385
ms.sourcegitcommit: 511a76b204f93d23cf9f7a70059525f79170f6bb
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 08/11/2021
ms.locfileid: "7140743"
---
في Project Operations، يتم إنشاء الفواتير الأولية كملحق للفواتير في Microsoft Dynamics 365 Sales. 

ومع ذلك، تختلف عملية الفوترة بين Sales وProject Operations عندما يتعلق الأمر بإعداد الفواتير. 

على سبيل المثال، لا يمكن إنشاء فاتورة جديدة من صفحة **قائمة الفواتير** في Project Operations، ولكن يمكن ذلك في Sales. 

وهذه الاختلافات والملحقات يتم وضعها لدعم عمليات الفوترة الخاصة بالمشاريع المختلفة عن الفاتورة النموذجية لأمر المبيعات.

 > [!IMPORTANT]
>  ونظراً لهذه الاختلافات، لا تستخدم الفواتير في Sales وProject Operations بشكل متبادل.

تُتيح الفوترة لمديري المشاريع مستوى ثانياً للموافقة قبل إنشاء الفواتير للعملاء. ينتهي المستوى الأول من الموافقة عند الموافقة على إدخالات الوقت والمصروفات التي يرسلها أعضاء فريق المشروع.

## <a name="create-project-invoices"></a>إنشاء فواتير المشروع
يمكنك إنشاء فواتير المشروع كلٍ على حدة أو دفعة واحدة. وبالإضافة إلى ذلك، يمكنك إنشاؤها يدوياً، أو يمكن تكوينها حتى يتم إنشاؤها في عمليات التشغيل التلقائية.

### <a name="create-project-invoices-manually"></a>إنشاء فواتير المشروع يدوياً
من صفحة **قائمة عقود المشروع**، يمكنك إنشاء فواتير المشروع كل على حدة لكل عقد مشروع، أو يمكنك إنشاء فواتير مجمّعة لعقود مشروع متعددة.

لإنشاء فاتورة لعقد مشروع معيّن، في صفحة قائمة **عقود المشروع**، افتح عقد مشروع ثم حدد **إنشاء فاتورة**.

سيتم إنشاء فاتورة لجميع معاملات عقد المشروع المحدد بحالة **‏‫جاهز للفوترة‬**. تتضمن هذه المعاملات الوقت والمصروفات والمراحل الرئيسية وشروط التعاقد المستندة إلى المنتجات.

اتبع الخطوات التالية لإنشاء فواتير مجمّعة:

1. في صفحة قائمة **عقود المشروع**، حدد عقداً واحداً أو أكثر من عقود المشروع التي يلزم إنشاء فاتورة لها، ثم حدد **إنشاء فواتير مشروع**.
   
   تُخبرك رسالة تحذير بأنه قد يكون هناك تأخير قبل إنشاء الفواتير. ويتم أيضاً عرض العملية.
   
2. حدد **موافق** لإغلاق مربع الرسالة.
   
   سيتم إنشاء فاتورة لجميع معاملات شروط التعاقد بالحالة **‏‫جاهز للفوترة‬**. تتضمن هذه المعاملات الوقت والمصروفات والمراحل الرئيسية وشروط التعاقد المستندة إلى المنتجات.
   
3. لعرض الفواتير التي تم إنشاؤها، انتقل إلى **المبيعات > الفوترة > الفواتير**. ستظهر لك فاتورة واحدة لكل عقد مشروع.

## <a name="set-up-the-automated-creation-of-project-invoices"></a>إعداد الإنشاء التلقائي لفواتير المشروع
اتبع الخطوات التالية لتكوين التشغيل التلقائي للفاتورة:

1. انتقل إلى **إعدادات > وظائف دفعية**.
2. قم بإنشاء مهمة دُفعة وتسميتها بالاسم **إنشاء فواتير Project Operations**. يجب أن يتضمن اسم الوظيفة الدفعية الكلمتين *إنشاء فواتير*.
3. في الحقل **نوع الوظيفة**، حدد **بلا**. يتم بشكل افتراضي تعيين الخيارين **التكرار يومياً** و **نشط** إلى **نعم**.
4. حدد **تشغيل سير العمل**. سيعرض مربع حوار **البحث عن سجل** ثلاث مهام لسير العمل:
   - **ProcessRunCaller**
   - **ProcessRunner**
   - **UpdateRoleUtilization**
5. حدد **ProcessRunCaller**، ثم حدد **إضافة**.
6. وفي مربع الحوار التالي، حدد **موافق**. ويكون سير العمل **السكون** متبوعاً بسير العمل **العملية**.
7. يمكنك أيضاً تحديد **ProcessRunner** في الخطوة 5. بعد ذلك، عند تحديد **موافق**، فإن سير عمل **العملية** يتبعه سير عمل **السكون**.

**ProcessRunner** هو سير العمل الذي يُنشئ الفواتير، ويمر بجميع شروط التعاقد التي يجب إنشاء فواتير لها، ثم يُنشئ فواتير لهذه الشروط. لتحديد شروط التعاقد التي يجب إنشاء فواتير لها، تبحث الوظيفة في تواريخ تشغيل الفاتورة لشروط التعاقد. إذا كانت شروط التعاقد الخاصة بأحد العقود لها نفس تاريخ تشغيل الفاتورة، فإنه سيتم تجميع المعاملات في فاتورة واحدة تحتوي على بندين. وإذا لم تكن هناك معاملات متاحة لإنشاء فواتير لها، تتخطى الوظيفة إنشاء الفاتورة.

بعد انتهاء تشغيل **ProcessRunner**، فإنه يستدعي **ProcessRunCaller** ويوفر وقت الانتهاء، ثم يتم إغلاقه. وبعد ذلك، يبدأ **ProcessRunCaller** تشغيل المؤقت الذي يعمل على مدار 24 ساعة من وقت الانتهاء المحدد. وفي نهاية المؤقت، يتم إغلاق **ProcessRunCaller**.

تعد وظيفة معالجة الدفعة لإنشاء الفواتير وظيفة متكررة. إذا تم تشغيل معالجة الدفعة هذه عدة مرات، فسيتم إنشاء مثيلات متعددة للوظيفة تتسبب في حدوث أخطاء. ولذلك، يجب بدء معالجة الدفعة مرة واحدة فحسب، وكذلك إعادة تشغيلها في حالة توقفها عن العمل فقط.

يمكنك إجراء العمليات التالية في الفواتير الأولية:

- تحرير الرؤوس
- تحرير مبالغ مقدم الأتعاب التي سيتم استخدامها
- تحرير تفاصيل بنود **نوع الفوترة** و **الكمية**
- إضافة بنود جديدة لـ **الوقت** أو **المصروفات** أو **الرسوم** مباشرةً في الفاتورة
- الفوترة في السيناريوهات متعددة العملاء
- إجراء تأكيد الفاتورة وعمليات التحقق مما يجب عدم تجاوزه (NTE)
- تصحيح الفواتير لتصحيح الكمية أو السعر
- تأكيد التصحيحات

