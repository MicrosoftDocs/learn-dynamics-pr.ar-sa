---
ms.openlocfilehash: fb9b4548f261ae5c019911a56f226ed18ce6c58d
ms.sourcegitcommit: 92a606f075028b19e15ae2f9ba20912cbeb643e1
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 05/11/2021
ms.locfileid: "6072945"
---
<span data-ttu-id="e01b0-101">في Project Operations، يتم إنشاء الفواتير الأولية كملحق للفواتير في Microsoft Dynamics 365 Sales.</span><span class="sxs-lookup"><span data-stu-id="e01b0-101">In Project Operations, proforma invoices are built as an extension to the invoices in Microsoft Dynamics 365 Sales.</span></span> 

<span data-ttu-id="e01b0-102">ومع ذلك، تختلف عملية الفوترة بين Sales وProject Operations عندما يتعلق الأمر بإعداد الفواتير.</span><span class="sxs-lookup"><span data-stu-id="e01b0-102">However, the invoicing process between Sales and Project Operations differs when it comes to invoicing.</span></span> 

<span data-ttu-id="e01b0-103">على سبيل المثال، لا يمكن إنشاء فاتورة جديدة من صفحة **قائمة الفواتير** في Project Operations، ولكن يمكن ذلك في Sales.</span><span class="sxs-lookup"><span data-stu-id="e01b0-103">For example, it's not possible to create a new invoice from the **Invoices List** page in Project Operations, but it is possible to do so in Sales.</span></span> 

<span data-ttu-id="e01b0-104">وهذه الاختلافات والملحقات يتم وضعها لدعم عمليات الفوترة الخاصة بالمشاريع المختلفة عن الفاتورة النموذجية لأمر المبيعات.</span><span class="sxs-lookup"><span data-stu-id="e01b0-104">These differences and extensions are in place to support invoicing processes for projects that are different from a typical invoice for a sales order.</span></span>

 > [!IMPORTANT]
>  <span data-ttu-id="e01b0-105">ونظراً لهذه الاختلافات، لا تستخدم الفواتير في Sales وProject Operations بشكل متبادل.</span><span class="sxs-lookup"><span data-stu-id="e01b0-105">Because of the differences, don't use invoices in Sales and Project Operations interchangeably.</span></span>

<span data-ttu-id="e01b0-106">تُتيح الفوترة لمديري المشاريع مستوى ثانياً للموافقة قبل إنشاء الفواتير للعملاء.</span><span class="sxs-lookup"><span data-stu-id="e01b0-106">Invoicing gives project managers a second level of approval before they create invoices for customers.</span></span> <span data-ttu-id="e01b0-107">ينتهي المستوى الأول من الموافقة عند الموافقة على إدخالات الوقت والمصروفات التي يرسلها أعضاء فريق المشروع.</span><span class="sxs-lookup"><span data-stu-id="e01b0-107">The first level of approval is completed when the time and expense entries that project team members submit are approved.</span></span>

## <a name="create-project-invoices"></a><span data-ttu-id="e01b0-108">إنشاء فواتير المشروع</span><span class="sxs-lookup"><span data-stu-id="e01b0-108">Create project invoices</span></span>
<span data-ttu-id="e01b0-109">يمكنك إنشاء فواتير المشروع كلٍ على حدة أو دفعة واحدة.</span><span class="sxs-lookup"><span data-stu-id="e01b0-109">You can create project invoices one at a time or in bulk.</span></span> <span data-ttu-id="e01b0-110">وبالإضافة إلى ذلك، يمكنك إنشاؤها يدوياً، أو يمكن تكوينها حتى يتم إنشاؤها في عمليات التشغيل التلقائية.</span><span class="sxs-lookup"><span data-stu-id="e01b0-110">Additionally, you can create them manually, or they can be configured so that they are generated in automated runs.</span></span>

### <a name="create-project-invoices-manually"></a><span data-ttu-id="e01b0-111">إنشاء فواتير المشروع يدوياً</span><span class="sxs-lookup"><span data-stu-id="e01b0-111">Create project invoices manually</span></span>
<span data-ttu-id="e01b0-112">من صفحة **قائمة عقود المشروع**، يمكنك إنشاء فواتير المشروع كل على حدة لكل عقد مشروع، أو يمكنك إنشاء فواتير مجمّعة لعقود مشروع متعددة.</span><span class="sxs-lookup"><span data-stu-id="e01b0-112">From the **Project Contracts list** page, you can create project invoices separately for each project contract, or you can create invoices in bulk for multiple project contracts.</span></span>

<span data-ttu-id="e01b0-113">لإنشاء فاتورة لعقد مشروع معيّن، في صفحة قائمة **عقود المشروع**، افتح عقد مشروع ثم حدد **إنشاء فاتورة**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-113">To create an invoice for a specific project contract, on the **Project Contracts** list page, open a project contract and then select **Create Invoice**.</span></span>

<span data-ttu-id="e01b0-114">سيتم إنشاء فاتورة لجميع معاملات عقد المشروع المحدد بحالة **‏‫جاهز للفوترة‬**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-114">An invoice will be generated for all transactions for the selected project contract that have a status of **Ready to Invoice**.</span></span> <span data-ttu-id="e01b0-115">تتضمن هذه المعاملات الوقت والمصروفات والمراحل الرئيسية وشروط التعاقد المستندة إلى المنتجات.</span><span class="sxs-lookup"><span data-stu-id="e01b0-115">These transactions include time, expenses, milestones, and product-based contract lines.</span></span>

<span data-ttu-id="e01b0-116">اتبع الخطوات التالية لإنشاء فواتير مجمّعة:</span><span class="sxs-lookup"><span data-stu-id="e01b0-116">Follow these steps to create invoices in bulk:</span></span>

1. <span data-ttu-id="e01b0-117">في صفحة قائمة **عقود المشروع**، حدد عقداً واحداً أو أكثر من عقود المشروع التي يلزم إنشاء فاتورة لها، ثم حدد **إنشاء فواتير مشروع**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-117">On the **Project Contracts** list page, select one or more project contracts that you must create an invoice for, and then select **Create Project Invoices**.</span></span>
   
   <span data-ttu-id="e01b0-118">تُخبرك رسالة تحذير بأنه قد يكون هناك تأخير قبل إنشاء الفواتير.</span><span class="sxs-lookup"><span data-stu-id="e01b0-118">A warning message informs you that a delay might occur before invoices are created.</span></span> <span data-ttu-id="e01b0-119">ويتم أيضاً عرض العملية.</span><span class="sxs-lookup"><span data-stu-id="e01b0-119">The process is also shown.</span></span>
   
2. <span data-ttu-id="e01b0-120">حدد **موافق** لإغلاق مربع الرسالة.</span><span class="sxs-lookup"><span data-stu-id="e01b0-120">Select **OK** to close the message box.</span></span>
   
   <span data-ttu-id="e01b0-121">سيتم إنشاء فاتورة لجميع معاملات شروط التعاقد بالحالة **‏‫جاهز للفوترة‬**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-121">An invoice will be generated for all transactions on a contract line that have a status of **Ready to Invoice**.</span></span> <span data-ttu-id="e01b0-122">تتضمن هذه المعاملات الوقت والمصروفات والمراحل الرئيسية وشروط التعاقد المستندة إلى المنتجات.</span><span class="sxs-lookup"><span data-stu-id="e01b0-122">These transactions include time, expenses, milestones, and product-based contract lines.</span></span>
   
3. <span data-ttu-id="e01b0-123">لعرض الفواتير التي تم إنشاؤها، انتقل إلى **المبيعات > الفوترة > الفواتير**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-123">To view the invoices that are generated, go to **Sales > Billing > Invoices**.</span></span> <span data-ttu-id="e01b0-124">ستظهر لك فاتورة واحدة لكل عقد مشروع.</span><span class="sxs-lookup"><span data-stu-id="e01b0-124">You should see one invoice for each project contract.</span></span>

## <a name="set-up-the-automated-creation-of-project-invoices"></a><span data-ttu-id="e01b0-125">إعداد الإنشاء التلقائي لفواتير المشروع</span><span class="sxs-lookup"><span data-stu-id="e01b0-125">Set up the automated creation of project invoices</span></span>
<span data-ttu-id="e01b0-126">اتبع الخطوات التالية لتكوين التشغيل التلقائي للفاتورة:</span><span class="sxs-lookup"><span data-stu-id="e01b0-126">Follow these steps to configure an automated invoice run:</span></span>

1. <span data-ttu-id="e01b0-127">انتقل إلى **إعدادات > وظائف دفعية**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-127">Go to **Settings > Batch jobs**.</span></span>
2. <span data-ttu-id="e01b0-128">قم بإنشاء مهمة دُفعة وتسميتها بالاسم **إنشاء فواتير Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-128">Create a batch job and name it **Project Operations Create Invoices**.</span></span> <span data-ttu-id="e01b0-129">يجب أن يتضمن اسم الوظيفة الدفعية الكلمتين *إنشاء فواتير*.</span><span class="sxs-lookup"><span data-stu-id="e01b0-129">The name of the batch job must include the words *Create Invoices*.</span></span>
3. <span data-ttu-id="e01b0-130">في الحقل **نوع الوظيفة**، حدد **بلا**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-130">In the **Job type** field, select **None**.</span></span> <span data-ttu-id="e01b0-131">يتم بشكل افتراضي تعيين الخيارين **التكرار يومياً** و **نشط** إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-131">By default, the **Frequency Daily** and **Is Active** options are set to **Yes**.</span></span>
4. <span data-ttu-id="e01b0-132">حدد **تشغيل سير العمل**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-132">Select **Run Workflow**.</span></span> <span data-ttu-id="e01b0-133">سيعرض مربع حوار **البحث عن سجل** ثلاث مهام لسير العمل:</span><span class="sxs-lookup"><span data-stu-id="e01b0-133">The **Look Up Record** dialog box will show three workflows:</span></span>
   - <span data-ttu-id="e01b0-134">**ProcessRunCaller**</span><span class="sxs-lookup"><span data-stu-id="e01b0-134">**ProcessRunCaller**</span></span>
   - <span data-ttu-id="e01b0-135">**ProcessRunner**</span><span class="sxs-lookup"><span data-stu-id="e01b0-135">**ProcessRunner**</span></span>
   - <span data-ttu-id="e01b0-136">**UpdateRoleUtilization**</span><span class="sxs-lookup"><span data-stu-id="e01b0-136">**UpdateRoleUtilization**</span></span>
5. <span data-ttu-id="e01b0-137">حدد **ProcessRunCaller**، ثم حدد **إضافة**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-137">Select **ProcessRunCaller** and then select **Add**.</span></span>
6. <span data-ttu-id="e01b0-138">وفي مربع الحوار التالي، حدد **موافق**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-138">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="e01b0-139">ويكون سير العمل **السكون** متبوعاً بسير العمل **العملية**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-139">A **Sleep** workflow is followed by a **Process** workflow.</span></span>
7. <span data-ttu-id="e01b0-140">يمكنك أيضاً تحديد **ProcessRunner** في الخطوة 5.</span><span class="sxs-lookup"><span data-stu-id="e01b0-140">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="e01b0-141">بعد ذلك، عند تحديد **موافق**، فإن سير عمل **العملية** يتبعه سير عمل **السكون**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-141">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="e01b0-142">**ProcessRunner** هو سير العمل الذي يُنشئ الفواتير،</span><span class="sxs-lookup"><span data-stu-id="e01b0-142">**ProcessRunner** is the workflow that creates the invoices.</span></span> <span data-ttu-id="e01b0-143">ويمر بجميع شروط التعاقد التي يجب إنشاء فواتير لها، ثم يُنشئ فواتير لهذه الشروط.</span><span class="sxs-lookup"><span data-stu-id="e01b0-143">It goes through all contract lines that invoices must be created for, and then it creates invoices for those lines.</span></span> <span data-ttu-id="e01b0-144">لتحديد شروط التعاقد التي يجب إنشاء فواتير لها، تبحث الوظيفة في تواريخ تشغيل الفاتورة لشروط التعاقد.</span><span class="sxs-lookup"><span data-stu-id="e01b0-144">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="e01b0-145">إذا كانت شروط التعاقد الخاصة بأحد العقود لها نفس تاريخ تشغيل الفاتورة، فإنه سيتم تجميع المعاملات في فاتورة واحدة تحتوي على بندين.</span><span class="sxs-lookup"><span data-stu-id="e01b0-145">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="e01b0-146">وإذا لم تكن هناك معاملات متاحة لإنشاء فواتير لها، تتخطى الوظيفة إنشاء الفاتورة.</span><span class="sxs-lookup"><span data-stu-id="e01b0-146">If no transactions are available to create invoices for, the job skips invoice creation.</span></span>

<span data-ttu-id="e01b0-147">بعد انتهاء تشغيل **ProcessRunner**، فإنه يستدعي **ProcessRunCaller** ويوفر وقت الانتهاء، ثم يتم إغلاقه.</span><span class="sxs-lookup"><span data-stu-id="e01b0-147">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and then is closed.</span></span> <span data-ttu-id="e01b0-148">وبعد ذلك، يبدأ **ProcessRunCaller** تشغيل المؤقت الذي يعمل على مدار 24 ساعة من وقت الانتهاء المحدد.</span><span class="sxs-lookup"><span data-stu-id="e01b0-148">**ProcessRunCaller** then starts a timer that runs for 24 hours from the specified end time.</span></span> <span data-ttu-id="e01b0-149">وفي نهاية المؤقت، يتم إغلاق **ProcessRunCaller**.</span><span class="sxs-lookup"><span data-stu-id="e01b0-149">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="e01b0-150">تعد وظيفة معالجة الدفعة لإنشاء الفواتير وظيفة متكررة.</span><span class="sxs-lookup"><span data-stu-id="e01b0-150">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="e01b0-151">إذا تم تشغيل معالجة الدفعة هذه عدة مرات، فسيتم إنشاء مثيلات متعددة للوظيفة تتسبب في حدوث أخطاء.</span><span class="sxs-lookup"><span data-stu-id="e01b0-151">If this batch process is run many times, multiple instances of the job are created and will cause errors.</span></span> <span data-ttu-id="e01b0-152">ولذلك، يجب بدء معالجة الدفعة مرة واحدة فحسب، وكذلك إعادة تشغيلها في حالة توقفها عن العمل فقط.</span><span class="sxs-lookup"><span data-stu-id="e01b0-152">Therefore, you should start the batch process only one time, and you should restart it only if it stops running.</span></span>

<span data-ttu-id="e01b0-153">يمكنك إجراء العمليات التالية في الفواتير الأولية:</span><span class="sxs-lookup"><span data-stu-id="e01b0-153">You can perform the following operations with Proforma invoices:</span></span>

- <span data-ttu-id="e01b0-154">تحرير الرؤوس</span><span class="sxs-lookup"><span data-stu-id="e01b0-154">Edit headers</span></span>
- <span data-ttu-id="e01b0-155">تحرير مبالغ مقدم الأتعاب التي سيتم استخدامها</span><span class="sxs-lookup"><span data-stu-id="e01b0-155">Edit retainer amounts to be used</span></span>
- <span data-ttu-id="e01b0-156">تحرير تفاصيل بنود **نوع الفوترة** و **الكمية**</span><span class="sxs-lookup"><span data-stu-id="e01b0-156">Edit line details for **Billing type** and **Quantity**</span></span>
- <span data-ttu-id="e01b0-157">إضافة بنود جديدة لـ **الوقت** أو **المصروفات** أو **الرسوم** مباشرةً في الفاتورة</span><span class="sxs-lookup"><span data-stu-id="e01b0-157">Add new lines for **Time**, **Expense**, or **Fees** directly on the invoice</span></span>
- <span data-ttu-id="e01b0-158">الفوترة في السيناريوهات متعددة العملاء</span><span class="sxs-lookup"><span data-stu-id="e01b0-158">Invoice in multi-customer scenarios</span></span>
- <span data-ttu-id="e01b0-159">إجراء تأكيد الفاتورة وعمليات التحقق مما يجب عدم تجاوزه (NTE)</span><span class="sxs-lookup"><span data-stu-id="e01b0-159">Perform invoice confirmation and not-to-exceed (NTE) Validations</span></span>
- <span data-ttu-id="e01b0-160">تصحيح الفواتير لتصحيح الكمية أو السعر</span><span class="sxs-lookup"><span data-stu-id="e01b0-160">Correct invoices for correcting quantity or price</span></span>
- <span data-ttu-id="e01b0-161">تأكيد التصحيحات</span><span class="sxs-lookup"><span data-stu-id="e01b0-161">Confirm corrections</span></span>

