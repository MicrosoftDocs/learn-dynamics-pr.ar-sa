---
ms.openlocfilehash: 0ad49d18be8a3e4274ff939ff5d59b4126ade941
ms.sourcegitcommit: ecd5b30834eade4258e6987fff347afcf97fbf7a
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 05/06/2021
ms.locfileid: "6072919"
---
<span data-ttu-id="c2d20-101">في Project Operations، يتم إنشاء الفواتير الأولية كملحق للفواتير في Dynamics 365 Sales.</span><span class="sxs-lookup"><span data-stu-id="c2d20-101">In Project Operations, proforma invoices are built as an extension to the invoices in Dynamics 365 Sales.</span></span> <span data-ttu-id="c2d20-102">ومع ذلك، تحدث العديد من الاختلافات في عملية الفوترة بين Sales وProject Operations.</span><span class="sxs-lookup"><span data-stu-id="c2d20-102">However, many differences occur in the invoicing process between Sales and Project Operations.</span></span> 

<span data-ttu-id="c2d20-103">على سبيل المثال، لا يمكن إنشاء فاتورة جديدة من صفحة **الفواتير** في Project Operations، ولكن يمكن ذلك في Sales.</span><span class="sxs-lookup"><span data-stu-id="c2d20-103">For example, it is not possible to create a new invoice from the **Invoices** list page in Project Operations, but it is possible to do so in Sales.</span></span> <span data-ttu-id="c2d20-104">وهذه الاختلافات والملحقات يتم وضعها لدعم عمليات الفوترة الخاصة بالمشاريع المختلفة عن الفاتورة النموذجية لأمر المبيعات.</span><span class="sxs-lookup"><span data-stu-id="c2d20-104">These differences and extensions are in place to support invoicing processes for projects that are different from a typical invoice for a sales order.</span></span>

## <a name="configure-automatic-invoice-creation"></a><span data-ttu-id="c2d20-105">تكوين عملية إنشاء الفواتير تلقائياً</span><span class="sxs-lookup"><span data-stu-id="c2d20-105">Configure automatic invoice creation</span></span>

<span data-ttu-id="c2d20-106">يمكنك تكوين عملية إنشاء الفواتير تلقائياً في Project Operations.</span><span class="sxs-lookup"><span data-stu-id="c2d20-106">You can configure automatic invoice creation in Project Operations.</span></span> <span data-ttu-id="c2d20-107">ويقوم النظام بإنشاء فاتورة أولية للمسودة استناداً إلى جدول الفاتورة لكل عقد مشروع وشروط التعاقد.</span><span class="sxs-lookup"><span data-stu-id="c2d20-107">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="c2d20-108">ويتم تكوين جداول الفواتير في مستوى شروط التعاقد.</span><span class="sxs-lookup"><span data-stu-id="c2d20-108">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="c2d20-109">ويمكن أن يكون لكل شرط في العقد جدول فاتورة مميز، أو يمكن تضمين جدول الفواتير نفسه في كل شرط من شروط التعاقد.</span><span class="sxs-lookup"><span data-stu-id="c2d20-109">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="c2d20-110">عند إنشاء فاتورة، يقوم النظام دائماً بإنشاء فاتورة واحدة على الأقل لكل عقد مشروع.</span><span class="sxs-lookup"><span data-stu-id="c2d20-110">When you create an invoice, the system always creates at least one invoice for each project contract.</span></span> <span data-ttu-id="c2d20-111">وفي بعض الحالات، قد يتم إنشاء فواتير متعددة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-111">In some cases, multiple invoices might be created.</span></span>

<span data-ttu-id="c2d20-112">على سبيل المثال، إذا كان للعقد عدة عملاء، فسيتم إنشاء عدد الفواتير نفسه على أنه عدد العملاء الذين لديهم حركات قابلة للفوترة لفوترة عقد المشروع هذا.</span><span class="sxs-lookup"><span data-stu-id="c2d20-112">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

<span data-ttu-id="c2d20-113">أكمل الخطوات الآتية لتكوين التشغيل التلقائي للفاتورة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-113">Complete the following steps to configure an automated invoice run.</span></span>

1.  <span data-ttu-id="c2d20-114">في Project Operations، انتقل إلى **الإعدادات > إعداد الفاتورة المتكررة**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-114">In Project Operations, go to **Settings > Recurring Invoice Setup**.</span></span>
2.  <span data-ttu-id="c2d20-115">قم بإنشاء مهمة دُفعة وتسميتها بالاسم **إنشاء فواتير Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-115">Create a batch job and name it **Project Operations Create Invoices**.</span></span> <span data-ttu-id="c2d20-116">يجب أن يتضمن اسم الوظيفة الدفعية الكلمتين إنشاء فواتير.</span><span class="sxs-lookup"><span data-stu-id="c2d20-116">The name of the batch job must include the words "create invoices."</span></span>
3.  <span data-ttu-id="c2d20-117">في الحقل **نوع الوظيفة**، حدد **بلا**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-117">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="c2d20-118">وبشكل افتراضي، يتم تعيين الحقول **التكرار يومياً** و **نشط** إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-118">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4.  <span data-ttu-id="c2d20-119">حدد **تشغيل سير العمل**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-119">Select **Run Workflow**.</span></span> <span data-ttu-id="c2d20-120">في مربع حوار **البحث عن سجل**، سترى ثلاث مهام لسير العمل:</span><span class="sxs-lookup"><span data-stu-id="c2d20-120">In the **Look Up Record** dialog box, you will see three workflows:</span></span>
    - <span data-ttu-id="c2d20-121">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="c2d20-121">ProcessRunCaller</span></span>
    - <span data-ttu-id="c2d20-122">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="c2d20-122">ProcessRunner</span></span>
    - <span data-ttu-id="c2d20-123">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="c2d20-123">UpdateRoleUtilization</span></span>
5.  <span data-ttu-id="c2d20-124">حدد **ProcessRunCaller**، ثم حدد **إضافة**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-124">Select **ProcessRunCaller** and then select **Add**.</span></span>
6.  <span data-ttu-id="c2d20-125">وفي مربع الحوار التالي، حدد **موافق**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-125">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="c2d20-126">ويكون سير العمل **السكون** متبوعاً بسير العمل **العملية**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-126">A **Sleep** workflow is followed by a **Process** workflow.</span></span>

## <a name="create-a-manual-proforma-invoice"></a><span data-ttu-id="c2d20-127">إنشاء فاتورة أولية يدوية</span><span class="sxs-lookup"><span data-stu-id="c2d20-127">Create a manual proforma invoice</span></span>

<span data-ttu-id="c2d20-128">في Project Operations، يمكن إنشاء فواتير أولية يدوياً، حسب الحاجة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-128">In Project Operations, proforma invoices can be created manually, as needed.</span></span> <span data-ttu-id="c2d20-129">ويمكنك إنشاء فاتورة أولية يدوياً من صفحة القائمة **عقود المشروع** أو من الصفحة **تفاصيل عقد المشروع**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-129">You can manually create a proforma invoice from the **Project Contracts** list page or from the **Project Contract details** page.</span></span>

### <a name="project-contracts-list-page"></a><span data-ttu-id="c2d20-130">صفحة القائمة "عقد المشروع"</span><span class="sxs-lookup"><span data-stu-id="c2d20-130">Project Contracts list page</span></span>

<span data-ttu-id="c2d20-131">من صفحة القائمة **عقود المشروع**، حدد عقد مشروع أو أكثر، ثم قم بإنشاء فواتير لكافة السجلات المحددة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-131">From the **Project Contracts** list page, select one or more project contract and then create invoices for all selected records.</span></span>

<span data-ttu-id="c2d20-132">يقوم النظام بالتحقق مما إذا كانت حالة التراكم لعقود المشروع المحددة هي **جاهزة للفوترة** وأنها بتاريخ قبل تاريخ اليوم.</span><span class="sxs-lookup"><span data-stu-id="c2d20-132">The system checks to see which of the selected project contracts has a **Ready to Invoice** status backlog that is dated before today's date.</span></span> <span data-ttu-id="c2d20-133">ومن تلك العقود، يقوم النظام بإنشاء الفواتير الأولية للمسودة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-133">From those contracts, the system creates draft proforma invoices.</span></span> <span data-ttu-id="c2d20-134">وإذا كان لعقد المشروع عدة عملاء، فقد يتم إنشاء فاتورة واحدة لكل عميل وفواتير متعددة لكل عقد مشروع.</span><span class="sxs-lookup"><span data-stu-id="c2d20-134">If a project contract has multiple customers, one invoice might be created for each customer and multiple invoices for each project contract.</span></span>

<span data-ttu-id="c2d20-135">وتتوفر كافة فواتير المشروع التي تم إنشاؤها في الصفحة **الفاتورة** في القسم **الفوترة** من المنطقة **المبيعات**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-135">All created project invoices are available on the **Invoice** page in the **Billing** section of the **Sales** area.</span></span>

### <a name="project-contract-details-page"></a><span data-ttu-id="c2d20-136">صفحة التفاصيل "عقد المشروع"</span><span class="sxs-lookup"><span data-stu-id="c2d20-136">Project Contract details page</span></span>

<span data-ttu-id="c2d20-137">يمكن أيضاً إنشاء فاتورة أولية من صفحة التفاصيل **عقد المشروع**، والتي تقوم بإنشاء الفاتورة لعقد المشروع المحدد هذا.</span><span class="sxs-lookup"><span data-stu-id="c2d20-137">A proforma invoice can also be created from the **Project Contract details** page, which creates the invoice for that specific project contract.</span></span> <span data-ttu-id="c2d20-138">يقوم النظام بالتحقق مما إذا كانت حالة التراكم لعقد المشروع هي **جاهز للفوترة** وأنها بتاريخ قبل تاريخ اليوم.</span><span class="sxs-lookup"><span data-stu-id="c2d20-138">The system verifies that the project contract has a **Ready to Invoice** backlog that is dated before today's date.</span></span> <span data-ttu-id="c2d20-139">ومن هذه العقود، يقوم النظام بإنشاء فواتير أولية للمسودة استناداً إلى عدد العملاء في جميع شروط التعاقد.</span><span class="sxs-lookup"><span data-stu-id="c2d20-139">From these contracts, the system creates draft proforma invoices based on the number of customers on each contract line.</span></span>

<span data-ttu-id="c2d20-140">عند إنشاء فاتورة أولية فردية، يتم فتح الصفحة **الفاتورة**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-140">When a single proforma invoice has been created, the **Invoice** page opens.</span></span> <span data-ttu-id="c2d20-141">وإذا تم إنشاء فواتير متعددة لعقد المشروع هذا، فسيتم فتح صفحة القائمة **الفواتير** لعرض كافة الفواتير التي تم إنشاؤها.</span><span class="sxs-lookup"><span data-stu-id="c2d20-141">If multiple invoices have been created for that project contract, then the **Invoices** list page opens to show all created invoices.</span></span>

## <a name="manage-the-billing-backlog"></a><span data-ttu-id="c2d20-142">إدارة تراكم الفوترة</span><span class="sxs-lookup"><span data-stu-id="c2d20-142">Manage the billing backlog</span></span>

<span data-ttu-id="c2d20-143">تحتوي Project Operations على طرق عرض للمساعدة على إدارة تراكم الفوترة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-143">Project Operations has views to help manage the billing backlog.</span></span> <span data-ttu-id="c2d20-144">لإدارة تراكم الفوترة، حدد الارتباطات الموجودة في المنطقة **المبيعات** ضمن **الفوترة**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-144">To manage the billing backlog, select the links in the **Sales** area under **Billing**.</span></span>

<span data-ttu-id="c2d20-145">وتتوفر طرق العرض الآتية داخل السيناريو **‏‫التوزيع الخفيف – التعامل مع الفواتير الأولية‬**:</span><span class="sxs-lookup"><span data-stu-id="c2d20-145">The following views are available within the **Lite deployment – deal to proforma invoicing** scenario:</span></span>

- <span data-ttu-id="c2d20-146">**‏‫المحتفظات والسُلف‬** - تسرد جميع ‏‫المحتفظات والسُلف‬ عبر كافة عقود المشاريع في النظام.</span><span class="sxs-lookup"><span data-stu-id="c2d20-146">**Retainers and Advances** - Lists all retainers and advances across all project contracts in the system.</span></span> <span data-ttu-id="c2d20-147">وبعد فوترة ‏‫المحتفظات والسُلف‬، يصبح مبلغ السلفة متوفراً للاستخدام.</span><span class="sxs-lookup"><span data-stu-id="c2d20-147">After a retainer or advance is invoiced, the amount of the advance becomes available for use.</span></span>

- <span data-ttu-id="c2d20-148">**‏‫المحتفظات والسُلف المتوفرة‬** - تسرد جميع ‏‫المحتفظات والسُلف‬ المتوفرة عبر كافة عقود المشاريع في النظام.</span><span class="sxs-lookup"><span data-stu-id="c2d20-148">**Available Retainers and Advances** - Lists all available retainers and advances across all project contracts in the system.</span></span> <span data-ttu-id="c2d20-149">وبعد فوترة ‏‫المحتفظات والسُلف‬، يصبح مبلغ السلفة متوفراً للاستخدام وتتم إضافته إلى القائمة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-149">After a retainer or advance is invoiced, the amount of the advance becomes available for use and is added to the list.</span></span> <span data-ttu-id="c2d20-150">وبعد أن يتم استخدام مبلغ المحتفظات أو السُلفة بالكامل، تتم إزالته من القائمة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-150">After the amount of the retainer or advance is used completely, it is removed from the list.</span></span>

- <span data-ttu-id="c2d20-151">**‏‫المراحل الرئيسية للأسعار الثابتة‬** - تسرد جميع ‏‫المراحل الرئيسية للأسعار الثابتة‬ عبر كافة شروط التعاقد الخاصة بالمشروع في النظام.</span><span class="sxs-lookup"><span data-stu-id="c2d20-151">**Fixed Price Milestones** - Lists all fixed price milestones across all project contract lines in the system.</span></span> <span data-ttu-id="c2d20-152">ويمكن تحديد المراحل الرئيسية المفردة أو المتعددة بأنها **جاهزة للفوترة** أو **غير جاهزة للفوترة** من طريقة العرض هذه.</span><span class="sxs-lookup"><span data-stu-id="c2d20-152">Single or multiple milestones can be marked as **Ready to invoice** or **Not ready to invoice** from this view.</span></span> <span data-ttu-id="c2d20-153">ويؤدي تحديد المرحلة الرئيسية بأنها **جاهزة للفوترة** إلى إتاحة وضعها في فاتورة مسودة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-153">Marking a milestone as **Ready to invoice** makes it available to be put on a draft invoice.</span></span>

- <span data-ttu-id="c2d20-154">**‏‫تراكم فوترة المنتجات‬** - يسرد كافة شروط التعاقد المستندة إلى المنتج عبر جميع عقود المشاريع في النظام.</span><span class="sxs-lookup"><span data-stu-id="c2d20-154">**Product Billing Backlog** - Lists all product-based contract lines across all project contracts in the system.</span></span> <span data-ttu-id="c2d20-155">ويمكن تحديد شروط التعاقد المستندة إلى المنتج المفردة أو المتعددة بأنها **جاهزة للفوترة** أو **غير جاهزة للفوترة** من طريقة العرض هذه.</span><span class="sxs-lookup"><span data-stu-id="c2d20-155">Single or multiple product-based contract lines can be marked as **Ready to Invoice** or **Not Ready to Invoice** from this view.</span></span> <span data-ttu-id="c2d20-156">ويؤدي تحديد شرط التعاقد المستند إلى المنتج بأنه **جاهز للفوترة** إلى إتاحة وضعه في فاتورة مسودة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-156">Marking a product-based contract line as **Ready to Invoice** makes it available to be put on a draft invoice.</span></span>

    <span data-ttu-id="c2d20-157">ويتم عرض شرط التعاقد المستند إلى المنتج والموجود في فاتورة مسودة في طريقة العرض هذه بحالة الفوترة **فاتورة العميل التي تم إنشاؤها**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-157">A product-based contract line that is on a draft invoice is shown in this view with a billing status of **Customer Invoice Created**.</span></span> <span data-ttu-id="c2d20-158">وعند تأكيد فاتورة المسودة، يتم تحديث حالة الفوترة في هذا السجل إلى **فاتورة العميل التي تم ترحيلها**.</span><span class="sxs-lookup"><span data-stu-id="c2d20-158">When the draft invoice is confirmed, the billing status on this record is updated to **Customer Invoice Posted**.</span></span> 

- <span data-ttu-id="c2d20-159">**‏‫تراكم فوترة الوقت والمواد‬** - يسرد جميع القيم الفعلية للمبيعات غير المفوترة عبر كافة عقود المشاريع في النظام التي لم تتم فوترتها.</span><span class="sxs-lookup"><span data-stu-id="c2d20-159">**Time and Material Billing Backlog** - Lists all unbilled sales actuals across all project contracts in the system that have not been invoiced.</span></span> <span data-ttu-id="c2d20-160">ويمكن تحديد القيم الفعلية للمبيعات غير المفوترة المفردة أو المتعددة بأنها **جاهزة للفوترة** أو **غير جاهزة للفوترة** من طريقة العرض هذه.</span><span class="sxs-lookup"><span data-stu-id="c2d20-160">Single or multiple unbilled sales actuals can be marked as **Ready to Invoice** or **Not Ready to Invoice** from this view.</span></span> <span data-ttu-id="c2d20-161">ويؤدي تحديد القيمة الفعلية غير المفوترة بأنها **جاهزة للفوترة** إلى إتاحة وضعها في فاتورة مسودة.</span><span class="sxs-lookup"><span data-stu-id="c2d20-161">Marking an unbilled sales actual as **Ready to Invoice** makes it available to be put on a draft invoice.</span></span>

<span data-ttu-id="c2d20-162">تعرف على المزيد حول الفوترة في [الشروع في العمل باستخدام الفوترة في الوحدة النمطية Dynamics 365 Project Operations](https://docs.microsoft.com/learn/modules/get-started-invoicing-project-operations/?azure-portal=true).</span><span class="sxs-lookup"><span data-stu-id="c2d20-162">Learn more about invoicing in the [Get started with invoicing in Dynamics 365 Project Operations](https://docs.microsoft.com/learn/modules/get-started-invoicing-project-operations/?azure-portal=true) module.</span></span>
