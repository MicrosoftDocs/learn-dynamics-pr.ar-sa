---
ms.openlocfilehash: a3a4d7aae0a9a8f3747f6c770b4516ce2cf78110
ms.sourcegitcommit: 0484f01637a384540476f9c6e45ba64bd86526a8
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 01/19/2021
ms.locfileid: "6070414"
---
<span data-ttu-id="03c78-101">يقوم وكيل Commerce بتجريد الواجهة بين Retail Server وCommerce runtime (CRT).</span><span class="sxs-lookup"><span data-stu-id="03c78-101">The Commerce proxy abstracts the interface between the Retail Server and Commerce runtime (CRT).</span></span> 

<span data-ttu-id="03c78-102">على سبيل المثال، يمكنك إنشاء كيان جديد وبعض منطق الأعمال كعمليات طلب/استجابة في CRT، ويمكنك إضافة واجهة API جديدة لـ Retail Server لعرض هذا الكيان وعمليات الطلب/الاستجابة هذه.</span><span class="sxs-lookup"><span data-stu-id="03c78-102">For example, you can create a new entity and some business logic as request/response operations in CRT, and you can add a new Retail Server API to expose that entity and those request/response operations.</span></span> <span data-ttu-id="03c78-103">والآن، فإنك ترغب في الوصول إلى الكيان وعمليات الطلب/الاستجابة في نقطة البيع (POS) لإنشاء منطق العميل.</span><span class="sxs-lookup"><span data-stu-id="03c78-103">Now, you want to access the entity and the request/response operations in the point of sale (POS) to create some client logic.</span></span> 

<span data-ttu-id="03c78-104">يمكنك إنشاء جميع الكيانات وبيانات تعريف الطلب/الاستجابة في نقطة البيع يدوياً، ويمكنك الوصول إلى Retail Server باستخدام المعلمات الصحيحة.</span><span class="sxs-lookup"><span data-stu-id="03c78-104">You can manually create all entities and request/response metadata in the POS, and you can access the Retail Server by using the correct parameters.</span></span> <span data-ttu-id="03c78-105">يقلل وكيل Commerce من هذا الجهد عن طريق إنشاء الوكيل تلقائياً لجميع الكيانات المخصصة وعمليات الطلب/الاستجابة التي تمت إضافتها في واجهة API لـ Retail Server.</span><span class="sxs-lookup"><span data-stu-id="03c78-105">The Commerce proxy reduces this effort by automatically generating the proxy for all custom entities and request/response operations that are added in Retail Server API.</span></span> 

<span data-ttu-id="03c78-106">تقوم أداة الوكيل بإنشاء الواجهة المطلوبة وجميع بيانات التعريف المطلوبة ثم تقوم بتجريد التنفيذ الفعلي.</span><span class="sxs-lookup"><span data-stu-id="03c78-106">The proxy tool generates the required interface and all required metadata and then abstracts the actual implementation.</span></span> <span data-ttu-id="03c78-107">بهذه الطريقة، يمكنك تضمين الملفات في مشروعات الملحقات والوصول إلى واجهات API لـ Retail Server والكيانات باستخدام بيانات التعريف والواجهة التي تم إنشاؤها.</span><span class="sxs-lookup"><span data-stu-id="03c78-107">In that way, you can include the files in the extension projects and access the Retail Server APIs and entities by using the metadata and interface that are generated.</span></span>

<span data-ttu-id="03c78-108">لإنشاء وكيل Typescript لنقطة البيع، اتبع الخطوات التالية:</span><span class="sxs-lookup"><span data-stu-id="03c78-108">To generate the Typescript proxy for POS, follow these steps:</span></span>

1. <span data-ttu-id="03c78-109">افتح نموذج مشروع قالب الوكيل من **\RetailSDK\Code\SampleExtensions\TypeScriptProxy\TypeScriptProxy.Extensions.StoreHoursSample\Proxies.TypeScriptProxy.Extensions.StoreHoursSample.csproj** في Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="03c78-109">Open the sample proxy template project from **\RetailSDK\Code\SampleExtensions\TypeScriptProxy\TypeScriptProxy.Extensions.StoreHoursSample\Proxies.TypeScriptProxy.Extensions.StoreHoursSample.csproj** in Visual Studio.</span></span> <span data-ttu-id="03c78-110">أعد تسميته، إذا لزم الأمر.</span><span class="sxs-lookup"><span data-stu-id="03c78-110">Rename it, if necessary.</span></span>
2. <span data-ttu-id="03c78-111">أضف مشروع ملحق Retail Server كمشروع مرجعي للمشروع إلى مشروع قالب الوكيل هذا.</span><span class="sxs-lookup"><span data-stu-id="03c78-111">Add the Retail Server extension project as a project reference project to this proxy template project.</span></span> <span data-ttu-id="03c78-112">قم بإزالة المشروع المرجعي **StoreHoursSample** الموجود.</span><span class="sxs-lookup"><span data-stu-id="03c78-112">Remove the existing **StoreHoursSample** project reference.</span></span>
3. <span data-ttu-id="03c78-113">انقر بزر الماوس الأيمن فوق **Proxies.TypeScriptProxy.Extensions.StoreHoursSample.csproj** ثم حدد **تحرير Proxies.TypeScriptProxy.Extensions.StoreHoursSample.csproj**.</span><span class="sxs-lookup"><span data-stu-id="03c78-113">Right-click **Proxies.TypeScriptProxy.Extensions.StoreHoursSample.csproj** and then select **Edit Proxies.TypeScriptProxy.Extensions.StoreHoursSample.csproj**.</span></span>
4. <span data-ttu-id="03c78-114">ضمن العقدة **<RetailServerExtensionAssemblies>**، حدد اسم تجميع ملحق Retail Server.</span><span class="sxs-lookup"><span data-stu-id="03c78-114">Under the **<RetailServerExtensionAssemblies>** node, specify your Retail Server extension assembly name.</span></span> <span data-ttu-id="03c78-115">يوضح المثال التالي كيفية إضافة اسم التجميع.</span><span class="sxs-lookup"><span data-stu-id="03c78-115">The following example shows how to add the assembly name.</span></span>
  
    ```csharp
    <ItemGroup>
        <RetailServerExtensionAssemblies Include="..\..\RetailServer\Extensions.Sample\bin\$(Configuration)\net461\$(AssemblyNamePrefix).RetailServer.Extension.Sample.dll" />
    </ItemGroup>
    ```
5. <span data-ttu-id="03c78-116">ضمن العقدة **نسخ**، قم بتحديث المسار **DestinationFolder** إلى مجلد ملحق نقطة البيع حتى يتم نسخ ملفات الوكيل التي تم إنشاؤها إلى المجلد **ملحق نقطة البيع** تلقائياً.</span><span class="sxs-lookup"><span data-stu-id="03c78-116">Under the **Copy** node, update the **DestinationFolder** path to your POS extension folder so that generated proxy files are copied to the **POS Extension** folder automatically.</span></span> <span data-ttu-id="03c78-117">سيتم أيضاً نسخ ملفات الوكيل التي تم إنشاؤها إلى **\RetailSDK\Code\SampleExtensions\TypeScriptProxy\TypeScriptProxy.Extensions.StoreHoursSample\DataService**.</span><span class="sxs-lookup"><span data-stu-id="03c78-117">The generated proxy files will also be copied to **\RetailSDK\Code\SampleExtensions\TypeScriptProxy\TypeScriptProxy.Extensions.StoreHoursSample\DataService**.</span></span> <span data-ttu-id="03c78-118">يوضح المثال التالي كيفية تحديث المسار.</span><span class="sxs-lookup"><span data-stu-id="03c78-118">The following example shows how to update the path.</span></span>
 
    ```csharp
    <Copy SourceFiles="@(GeneratedDataServiceContracts)" DestinationFolder="$(SdkRootPath)\POS\Extensions\Sample\DataService" SkipUnchangedFiles="true" />
    ``` 

6. <span data-ttu-id="03c78-119">بعد اكتمال التغييرات، قم بإنشاء مشروع الوكيل لإنشاء ملفات وكيل Typescript.</span><span class="sxs-lookup"><span data-stu-id="03c78-119">After the changes are complete, build the proxy project to generate the Typescript proxy files.</span></span> <span data-ttu-id="03c78-120">عند اكتمال الإنشاء، ستتوفر ملفات الوكيل في المجلد **\RetailSDK\Code\SampleExtensions\TypeScriptProxy\TypeScriptProxy.Extensions.StoreHoursSample\DataService** وفي المجلد المحدد في الأمر **نسخ**.</span><span class="sxs-lookup"><span data-stu-id="03c78-120">When the build has completed, the proxy files will be available in the **\RetailSDK\Code\SampleExtensions\TypeScriptProxy\TypeScriptProxy.Extensions.StoreHoursSample\DataService** folder and the folder that is specified in the **Copy** command.</span></span> <span data-ttu-id="03c78-121">يمكن أن يختلف المسار ومسار المجلد بناءً على بنية المجلد.</span><span class="sxs-lookup"><span data-stu-id="03c78-121">The path and folder path can vary based on the folder structure.</span></span>

<span data-ttu-id="03c78-122">لمعرفة المزيد من المعلومات، راجع [إنشاء واجهة API جديدة لملحق Retail Server](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/retail-server-icontroller-extension/?azure-portal=true).</span><span class="sxs-lookup"><span data-stu-id="03c78-122">For more information, see [Create a new Retail Server extension API](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/retail-server-icontroller-extension/?azure-portal=true).</span></span>

