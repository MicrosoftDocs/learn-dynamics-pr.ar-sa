---
ms.openlocfilehash: 48ff2e9e720d440ccfdeb7533ee1a1b87992505d
ms.sourcegitcommit: 7b8e0bce77648fe20efb0bf63bce723b8a30cfaf
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 04/28/2021
ms.locfileid: "6070526"
---
<span data-ttu-id="b5e15-101">يعتمد توزيع البيانات في التجارة على Commerce Data Exchange، الذي ينقل البيانات بين المركز الرئيسي والقنوات المختلفة لـ التجارة.</span><span class="sxs-lookup"><span data-stu-id="b5e15-101">Data distribution in Commerce is based on Commerce Data Exchange, which transfers data between Commerce Headquarters and the different channels.</span></span> 

<span data-ttu-id="b5e15-102">وتكون قاعدة البيانات التي تقوم بتخزين البيانات لإحدى القنوات، منفصلة عن قاعده بيانات Commerce.</span><span class="sxs-lookup"><span data-stu-id="b5e15-102">The database that stores data for a channel is separate from the Commerce database.</span></span> <span data-ttu-id="b5e15-103">تحتوي قاعدة بيانات القناة فقط على البيانات المطلوبة للحركات.</span><span class="sxs-lookup"><span data-stu-id="b5e15-103">The channel database holds only the data that is required for transactions.</span></span> <span data-ttu-id="b5e15-104">علي سبيل المثال، يتم إعداد البيانات الرئيسية في المركز الرئيسي ثم يتم توزيعها على القنوات، وعلى الجانب الآخر من الحركة، يتم إنشاء بيانات الحركات في نقطة البيع أو المتجر على الإنترنت، ثم يتم رفعها إلى المركز الرئيسي.</span><span class="sxs-lookup"><span data-stu-id="b5e15-104">For example, master data is set up in Headquarters and then distributed to channels; on the other side of the transaction, transactional data is created in the point of sale (POS) or the online store and then uploaded to Headquarters.</span></span>

<span data-ttu-id="b5e15-105">وفيما يلي المكونات المختلفة التي تساعد في توزيع البيانات بين المصدر والنظام المستهدف:</span><span class="sxs-lookup"><span data-stu-id="b5e15-105">The different components that help data be distributed between the source and the target system are:</span></span>

- <span data-ttu-id="b5e15-106">**خدمة غير متزامنة** - تعد عملية تجميع البيانات عند المصدر (المركز الرئيسي) هي عملية تحضيرها للتوزيع.</span><span class="sxs-lookup"><span data-stu-id="b5e15-106">**Async service** – The packaging of data at the source (the headquarters) is the process of preparing it for distribution.</span></span> <span data-ttu-id="b5e15-107">تحدث هذه العملية بشكل منفصل عن عملية إرسال هذه البيانات إلى القنوات المختلفة، وتطبيق التغييرات على قواعد البيانات لديها.</span><span class="sxs-lookup"><span data-stu-id="b5e15-107">This process happens separately from the process of sending this data to the different channels and applying the changes to their databases.</span></span> <span data-ttu-id="b5e15-108">تستخدم الخدمة غير المتزامنة مجدول التجارة لجدولة توزيع البيانات بمهام التحميل والتنزيل.</span><span class="sxs-lookup"><span data-stu-id="b5e15-108">Async service uses the Commerce scheduler to schedule data distribution with upload and download jobs.</span></span>
    - <span data-ttu-id="b5e15-109">**Microsoft SQL Server تتبع التغيير في قاعدة بيانات التجارة** – يُستخدم لتحديد تغييرات البيانات التي يجب إرسالها إلى القناة.</span><span class="sxs-lookup"><span data-stu-id="b5e15-109">**Microsoft SQL Server change tracking on the Commerce database** – Is used to determine data changes that should be sent to the channel.</span></span>
    
    - <span data-ttu-id="b5e15-110">**مجدول التجارة** – آلية لتبادل البيانات بين المواقع عبر وظائف دفعية مجدولة.</span><span class="sxs-lookup"><span data-stu-id="b5e15-110">**Commerce scheduler** – A mechanism to exchange data between locations through scheduled batch jobs.</span></span>

- <span data-ttu-id="b5e15-111">**خدمة الوقت الفعلي** – توفر اتصالاً في الوقت الفعلي بين إحدى القنوات وDynamics 365 Commerce للسيناريوهات التي يجب أن تتوفر فيها البيانات في الوقت الفعلي، مثل عمليات البحث عن المخزون، وإصدار بطاقات الهدايا واستردادها، وإنشاء سجلات العملاء وتحديثها، وغير ذلك الكثير.</span><span class="sxs-lookup"><span data-stu-id="b5e15-111">**Real-time service** – Provides real-time communication between a channel and Dynamics 365 Commerce for scenarios in which the data must be available in real time, such as inventory lookups, issuing and redeeming gift cards, creating and updating customer records, and more.</span></span> 

## <a name="consistency-in-payments-management-across-retail-channels"></a><span data-ttu-id="b5e15-112">الاتساق في إدارة المدفوعات عبر قنوات البيع بالتجزئة</span><span class="sxs-lookup"><span data-stu-id="b5e15-112">Consistency in payments management across retail channels</span></span>

<span data-ttu-id="b5e15-113">يرغب تجار التجزئة في تقديم خدمة بالجودة ذاتها للعملاء عبر جميع الأنظمة الأساسية، مع ضمان أن يكون لموظفي المكاتب الخلفية خبرة واضحة في التعامل مع أوامر البيع بالتجزئة.</span><span class="sxs-lookup"><span data-stu-id="b5e15-113">Retailers want to offer the same quality of service to customers across all platforms, while also ensuring that back-office staff have a clear experience handling retail orders.</span></span> <span data-ttu-id="b5e15-114">يجب أن تكون أي من واجهات معالجة أوامر البيع بالتجزئة قادرة على عرض وتعديل ومعالجة حركات الدفع المتعلقة بأوامر المبيعات بطريقة متسقة.</span><span class="sxs-lookup"><span data-stu-id="b5e15-114">Any of the retail order processing interfaces must be able to view, modify, and process payment transactions related to sales orders in a consistent manner.</span></span>

<span data-ttu-id="b5e15-115">تستخدم الإدارة الخلفية لمدفوعات أوامر التجارة الإلكترونية ونقطة البيع جداول \*\*MCRCustPaym\*\*\*.</span><span class="sxs-lookup"><span data-stu-id="b5e15-115">The back-end management of POS and e-commerce order payments uses the **MCRCustPaym**\* tables.</span></span> <span data-ttu-id="b5e15-116">من خلال إدارة بيانات دفع أوامر مبيعات التجزئة بطريقة متسقة، يُسمح بإدارة دفع أوامر البيع بالتجزئة ذات القنوات متعددة الاتجاهات الحقيقية لمستخدمي مركز الاتصال.</span><span class="sxs-lookup"><span data-stu-id="b5e15-116">By managing retail sales order payment data in a consistent way, true omnichannel retail order payment management is allowed for call center users.</span></span>

## <a name="archive-credit-card-transaction-data"></a><span data-ttu-id="b5e15-117">أرشفة بيانات حركات البطاقة المدينة</span><span class="sxs-lookup"><span data-stu-id="b5e15-117">Archive credit card transaction data</span></span>
<span data-ttu-id="b5e15-118">يمكن أن تشغل بيانات استجابة البطاقة المدينة مساحة كبيرة في قاعدة البيانات.</span><span class="sxs-lookup"><span data-stu-id="b5e15-118">Credit card response data can take up a lot of space in a database.</span></span> <span data-ttu-id="b5e15-119">ونظراً لأن هذه البيانات مطلوبة في الغالب لإجراء عمليات استرداد مرتبطة، تقل فائدة البيانات بشكل كبير بعد انتهاء صلاحية سياسة استرداد الأعمال الخاصة بالحركة.</span><span class="sxs-lookup"><span data-stu-id="b5e15-119">Because this data is mostly needed for performing linked refunds, the usefulness of the data decreases dramatically after the business refund policy for a transaction expires.</span></span> <span data-ttu-id="b5e15-120">تعمل وظيفة الأرشفة تلقائياً على أرشفة بيانات البطاقة المدينة عندما لا يمكن استخدامها لاسترداد الأموال المرتبطة وفقاً لسياسة الأعمال، وبالتالي ضمان الاحتفاظ بالبيانات الهامة فقط للعمليات اليومية.</span><span class="sxs-lookup"><span data-stu-id="b5e15-120">An archival job automatically archives credit card data when it can no longer be used for linked refunds according to business policy, thus ensuring that only critical data is kept for day-to-day operations.</span></span>

<span data-ttu-id="b5e15-121">يمكن تكوين وظيفة الأرشفة لأرشفة بيانات استجابة تفويض XML الخاصة بالبطاقة المدينة التي تتجاوز عمراً معيناً.</span><span class="sxs-lookup"><span data-stu-id="b5e15-121">The archival job can be configured to archive credit card XML authorization response data that is over a certain age.</span></span> <span data-ttu-id="b5e15-122">عندما تصل بيانات البطاقة المدينة إلى العمر المحدد، ستقوم الوظيفة بضغطها في ملف ‎.zip وتصديرها عبر إدارة المستندات.</span><span class="sxs-lookup"><span data-stu-id="b5e15-122">When the credit card data reaches the specified age, the job will compress it into a .zip file and export it via document management.</span></span> <span data-ttu-id="b5e15-123">لا يمكن استعادة البيانات برمجياً بعد تصديرها.</span><span class="sxs-lookup"><span data-stu-id="b5e15-123">Data cannot be restored programmatically after it has been exported.</span></span> <span data-ttu-id="b5e15-124">نظراً لأن بيانات التفويض الخاضعة للتصدير مطلوبة لعمليات الاسترداد المرتبطة، يجب فقط أن تخضع البيانات الأقدم من نافذة الاسترداد المرتبطة المحددة في سياسة إرجاع الشركة للتصدير.</span><span class="sxs-lookup"><span data-stu-id="b5e15-124">Because the authorization data subject to export is required for linked refunds, only data older than the linked refund window specified in the company's return policy should be subject to export.</span></span>

![رسم تخطيطي يوضح عملية أرشفة بيانات البطاقة المدينة خلال عمر معين.](../media/credit-card-data-c.png)

> [!Important]
> <span data-ttu-id="b5e15-126">لا يمكن استعادة البيانات بسهولة بعد أرشفتها.</span><span class="sxs-lookup"><span data-stu-id="b5e15-126">Data can't easily be restored after it has been archived.</span></span> <span data-ttu-id="b5e15-127">لذلك، لا ينبغي أرشفة الحركات التي تخضع إلى [عمليات الاسترداد المرتبطة](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/archive-cc-data/?azure-portal=true#key-terms).</span><span class="sxs-lookup"><span data-stu-id="b5e15-127">Therefore, transactions that are subject to [linked refunds](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/archive-cc-data/?azure-portal=true#key-terms) should not be archived.</span></span> <span data-ttu-id="b5e15-128">على سبيل المثال، إذا كانت سياسة إرجاع التاجر تسمح بإعادة الحركات إلى البطاقة المدينة ذاتها في غضون عامين، يجب تعيين الحقل **الحد الأدنى لعمر الحركة بالأيام** للوظيفة على 730 يوماً (سنتان).</span><span class="sxs-lookup"><span data-stu-id="b5e15-128">For example, if a merchant's returns policy allows transactions to be returned for refund to the same credit card within two years, the **Minimum transaction age in days** field for the job should be set to 730 days (two years).</span></span> <span data-ttu-id="b5e15-129">في هذه الحالة، إذا تم إرجاع حركة ما بعد 730 يوماً، فلن يتم العثور على XML المطلوب لإجراء عملية استرداد مرتبطة.</span><span class="sxs-lookup"><span data-stu-id="b5e15-129">In this case, if a transaction is returned after 730 days, the XML that is required to do a linked refund won't be found.</span></span> <span data-ttu-id="b5e15-130">لذلك، سيتعين على العميل استرداد المبلغ المدفوع من خلال [استرداد مستقل](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/archive-cc-data/?azure-portal=true#key-terms) إما إلى بطاقة مدينة أو طريقة دفع أخرى، مثل مذكرة ائتمان أو بطاقة هدايا.</span><span class="sxs-lookup"><span data-stu-id="b5e15-130">Therefore, the customer will have to be refunded via a [standalone refund](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/archive-cc-data/?azure-portal=true#key-terms) to either a credit card or some other payment method, such as a credit memo or gift card.</span></span>

<span data-ttu-id="b5e15-131">لمعرفة المزيد من المعلومات حول كيفية إعداد الوظيفة القابلة للأرشفة، راجع: [أرشفة بيانات حركات البطاقة المدينة](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/archive-cc-data/?azure-portal=true)</span><span class="sxs-lookup"><span data-stu-id="b5e15-131">For more information on how to set up the archivable job, see: [Archive credit card transaction data](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/archive-cc-data/?azure-portal=true)</span></span>


