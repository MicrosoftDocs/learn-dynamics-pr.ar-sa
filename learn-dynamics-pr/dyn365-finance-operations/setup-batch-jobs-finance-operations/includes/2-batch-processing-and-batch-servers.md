---
ms.openlocfilehash: 1052ab6e6abbd20cf716ab747d0a5d2f850b1cd5
ms.sourcegitcommit: 13594cb3c8f0b1478f14aac7e239bc20317f480c
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 03/15/2021
ms.locfileid: "6072503"
---
<span data-ttu-id="40e99-101">يوفر إطار عمل الدُفعات بيئة معالجة دُفعات غير متزامنة قائمة على الخادم يمكنها معالجة المهام عبر مثيلات متعددة لـ Application Object Server‏ (AOS).</span><span class="sxs-lookup"><span data-stu-id="40e99-101">The batch framework provides an asynchronous, server-based batch processing environment that can process tasks across multiple instances of the Application Object Server (AOS).</span></span> <span data-ttu-id="40e99-102">إن AOS هي الواجهة بين تطبيق العميل، مثل المستعرض وقاعدة بيانات تطبيقات Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="40e99-102">The AOS is the interface between the client application, such as a browser, and the Finance and Operations apps database.</span></span>

<span data-ttu-id="40e99-103">بالإضافة إلى القدرة على إنشاء وظائف مجمعة مع التنبيهات والتكرار، يمكنك أيضاً استخدام المعالجة المجمعة المستندة إلى الخادم لمعالجة المهام عبر مثيلات متعددة من AOS.</span><span class="sxs-lookup"><span data-stu-id="40e99-103">In addition to the ability to create batch jobs with alerts and recurrences, you can also use server-based batch processing to process tasks across multiple instances of the AOS.</span></span> <span data-ttu-id="40e99-104">هناك العديد من المزايا لاستخدام معالجة الدُفعات المستندة إلى الخادم.</span><span class="sxs-lookup"><span data-stu-id="40e99-104">There are several advantages to using server-based batch processing.</span></span> <span data-ttu-id="40e99-105">يمكنك إضافة تبعيات معقدة بين مهام الدُفعات أو بين المهام.</span><span class="sxs-lookup"><span data-stu-id="40e99-105">You can add complex dependencies between batch tasks or among tasks.</span></span> <span data-ttu-id="40e99-106">يمكنك أيضاً تشغيل المهام بخطوات متسلسلة أو متوازية وفقاً لاحتياجات العمل.</span><span class="sxs-lookup"><span data-stu-id="40e99-106">You can also run tasks in either serial or parallel steps depending on the needs of the business.</span></span> <span data-ttu-id="40e99-107">من المهم أن تتذكر أنه إذا لم يكن للمهمة تبعيات، فإنها تعتبر مهمة موازية.</span><span class="sxs-lookup"><span data-stu-id="40e99-107">It is important to remember that if a task has no dependencies, it is considered a parallel task.</span></span> 

<span data-ttu-id="40e99-108">الرسم التالي هو مثال لوظيفة لها العديد من المهام وتبعيات المهام.</span><span class="sxs-lookup"><span data-stu-id="40e99-108">The following graphic is an example of a job that has several tasks and task dependencies.</span></span> <span data-ttu-id="40e99-109">في هذا السيناريو، هناك سبع مهام تشكل جزءاً من الوظيفة.</span><span class="sxs-lookup"><span data-stu-id="40e99-109">In this scenario, there are seven tasks that are part of a job.</span></span> <span data-ttu-id="40e99-110">يوضح الرسم كيفية إكمال المهام اعتماداً على نتيجة المهام التابعة:</span><span class="sxs-lookup"><span data-stu-id="40e99-110">The graphic shows how tasks are completed depending on the outcome of the dependent tasks:</span></span>


![رسم تخطيطي لمثال لوظيفة يعرض تبعيات المهام السبع والمهام.](../media/job-tasks.png)


<span data-ttu-id="40e99-112">دعنا نتعرف على الجوانب التالية من إطار عمل الدُفعة:</span><span class="sxs-lookup"><span data-stu-id="40e99-112">Let’s get familiar with the following aspects of the batch framework:</span></span>

- <span data-ttu-id="40e99-113">تتكون **الوظيفة الدفعية** من مهمة دفعة واحدة أو أكثر.</span><span class="sxs-lookup"><span data-stu-id="40e99-113">A **batch job** consists of one or more batch tasks.</span></span>

- <span data-ttu-id="40e99-114">**مهمة الدُفعة** هي نشاط يتم تشغيله بواسطة وظيفة دفعية.</span><span class="sxs-lookup"><span data-stu-id="40e99-114">A **batch task** is an activity that is run by a batch job.</span></span> <span data-ttu-id="40e99-115">يمكنك إضافة مهام دفعات لها أنواع متعددة من التبعيات إلى وظيفة دفعية.</span><span class="sxs-lookup"><span data-stu-id="40e99-115">You can add batch tasks that have multiple types of dependencies to a batch job.</span></span> <span data-ttu-id="40e99-116">يمكنك أيضاً تكوين مثيلات AOS لتشغيل سلاسل رسائل متعددة، كل منها يدير مهمة.</span><span class="sxs-lookup"><span data-stu-id="40e99-116">You can also configure AOS instances to run multiple threads, each of which runs a task.</span></span> <span data-ttu-id="40e99-117">يمكن تنفيذ جميع مهام الدُفعات التي تنتظر التشغيل بواسطة أي مثيل AOS متاح تم تكوينه كخادم دُفعات.</span><span class="sxs-lookup"><span data-stu-id="40e99-117">All batch tasks that are waiting to be run can be performed by any available AOS instance that is configured as a batch server.</span></span> <span data-ttu-id="40e99-118">لتحسين الإنتاجية وتقليل وقت التنفيذ الإجمالي، يمكنك تحديد وظيفة دفعية مثل العديد من المهام ثم استخدام خادم دُفعات لتشغيل المهام مقابل جميع مثيلات AOS المتاحة.</span><span class="sxs-lookup"><span data-stu-id="40e99-118">To improve throughput and reduce overall execution time, you can define a batch job as many tasks and then use a batch server to run the tasks against all available AOS instances.</span></span>

- <span data-ttu-id="40e99-119">**مجموعة الدُفعات** هي سمة مهمة دُفعة.</span><span class="sxs-lookup"><span data-stu-id="40e99-119">A **batch group** is an attribute of a batch task.</span></span> <span data-ttu-id="40e99-120">تتيح مجموعة الدُفعات للمسؤول تحديد أو تحديد مثيل AOS الذي يقوم بتشغيل المهمة.</span><span class="sxs-lookup"><span data-stu-id="40e99-120">A batch group lets the administrator determine or specify which AOS instance runs the task.</span></span> <span data-ttu-id="40e99-121">عند إنشاء مهمة جديدة، يتم وضعها في مجموعة الدُفعات الافتراضية.</span><span class="sxs-lookup"><span data-stu-id="40e99-121">When you create a new task, it's put in the default batch group.</span></span> <span data-ttu-id="40e99-122">يتم تكوين جميع خوادم الدُفعات لمعالجة مجموعة الدُفعات الافتراضية ومهام الانتظار من أي وظيفة.</span><span class="sxs-lookup"><span data-stu-id="40e99-122">All batch servers are configured to process the default batch group and the waiting tasks from any job.</span></span> 

    <span data-ttu-id="40e99-123">بالإضافة إلى ذلك، يمكنك إنشاء مجموعة دُفعات مسماة، ثم تعيين تقارب بين مجموعة الدُفعات ومثيلات AOS المحددة.</span><span class="sxs-lookup"><span data-stu-id="40e99-123">Additionally, you can create a named batch group, and then set an affinity between that batch group and specific AOS instances.</span></span> <span data-ttu-id="40e99-124">بعد إنشاء هذا التقارب، ستقوم مثيلات AOS المحددة فقط بمعالجة المهام من مجموعة الدُفعات المسماة، وستقوم مثيلات AOS هذه بمعالجة المهام من مجموعة الدُفعات المسماة فقط.</span><span class="sxs-lookup"><span data-stu-id="40e99-124">After you create this affinity, only the specified AOS instances will process tasks from the named batch group, and those AOS instances will process tasks from the named batch group only.</span></span> <span data-ttu-id="40e99-125">يمكنك أيضاً إضافة مجموعة الدُفعات الافتراضية إلى الخوادم المكونة، إذا كانت مجموعة الدُفعات هذه مطلوبة.</span><span class="sxs-lookup"><span data-stu-id="40e99-125">You can also add the default batch group to the configured servers, if that batch group is required.</span></span>

## <a name="batch-server-topology-planning"></a><span data-ttu-id="40e99-126">تخطيط مخطط خادم الدُفعات</span><span class="sxs-lookup"><span data-stu-id="40e99-126">Batch server topology planning</span></span> 

<span data-ttu-id="40e99-127">تعتمد سعة خادم الدُفعات على الحد الأقصى لعدد سلاسل الرسائل التي يمكن تشغيلها بشكل متزامن على مثيل AOS.</span><span class="sxs-lookup"><span data-stu-id="40e99-127">The capacity of a batch server is based on the maximum number of threads that can run concurrently on the AOS instance.</span></span> <span data-ttu-id="40e99-128">كل سلسلة تدير مهمة دفعة واحدة.</span><span class="sxs-lookup"><span data-stu-id="40e99-128">Each thread runs one batch task.</span></span> <span data-ttu-id="40e99-129">يمكنك إضافة تبعيات معقدة بين المهام.</span><span class="sxs-lookup"><span data-stu-id="40e99-129">You can add complex dependencies between or among tasks.</span></span> <span data-ttu-id="40e99-130">يمكنك تشغيل هذه المهام في خطوات تسلسلية أو خطوات متوازية، اعتماداً على منطق ومتطلبات العمل.</span><span class="sxs-lookup"><span data-stu-id="40e99-130">You can run these tasks in serial steps or parallel steps, depending on the business logic and requirements.</span></span> <span data-ttu-id="40e99-131">تعتبر جميع المهام التي ليس لها أي تبعيات مهام متوازية.</span><span class="sxs-lookup"><span data-stu-id="40e99-131">All tasks that don't have any dependencies are considered parallel tasks.</span></span> <span data-ttu-id="40e99-132">تقوم مثيلات AOS التي تم تكوينها كخوادم دُفعات بالتحقق بشكل دوري من المهام التي تنتظر معالجتها.</span><span class="sxs-lookup"><span data-stu-id="40e99-132">AOS instances that are configured as batch servers periodically check for tasks that are waiting to be processed.</span></span> <span data-ttu-id="40e99-133">يقوم خادم الدفعات بتعيين كل مهمة متوازية إلى سلسلة ويبدأ في معالجة السلسلة.</span><span class="sxs-lookup"><span data-stu-id="40e99-133">The batch server assigns each parallel task to a thread and starts to process the thread.</span></span>

<span data-ttu-id="40e99-134">يمكنك تشغيل سلاسل متعددة عبر مثيلات AOS متعددة.</span><span class="sxs-lookup"><span data-stu-id="40e99-134">You can run multiple threads across multiple AOS instances.</span></span> <span data-ttu-id="40e99-135">يقوم كل مثيل AOS تلقائياً بتشغيل سلاسل متعددة، اعتماداً على تلك السعة المحددة في إعدادات التكوين.</span><span class="sxs-lookup"><span data-stu-id="40e99-135">Each AOS instance automatically runs multiple threads, depending on that capacity that is defined in the configuration settings.</span></span> <span data-ttu-id="40e99-136">لذلك، يمكن تشغيل المهام المتوازية من مهمة ما على سلاسل متعددة عبر مثيلات AOS متعددة.</span><span class="sxs-lookup"><span data-stu-id="40e99-136">Therefore, parallel tasks from a job can be run on multiple threads across multiple AOS instances.</span></span>

<span data-ttu-id="40e99-137">يتحقق خادم الدُفعات من السلاسل المتاحة مرة واحدة في الدقيقة.</span><span class="sxs-lookup"><span data-stu-id="40e99-137">A batch server checks for available threads one time per minute.</span></span> <span data-ttu-id="40e99-138">لذلك، قد تضطر إلى الانتظار لمدة دقيقة قبل أن ترى أنه يتم انتقاء مهمة انتظار للمعالجة بواسطة سلسلة متاحة.</span><span class="sxs-lookup"><span data-stu-id="40e99-138">Therefore, you might have to wait for a minute before you see that a waiting task is picked up for processing by an available thread.</span></span>

## <a name="batch-server-management-planning"></a><span data-ttu-id="40e99-139">تخطيط إدارة خادم الدُفعات</span><span class="sxs-lookup"><span data-stu-id="40e99-139">Batch server management planning</span></span> 

<span data-ttu-id="40e99-140">يمكن إدارة جميع خوادم الدُفعات من مكان واحد.</span><span class="sxs-lookup"><span data-stu-id="40e99-140">All batch servers can be managed from a single location.</span></span> <span data-ttu-id="40e99-141">أحد الاستخدامات النموذجية لخوادم الدُفعات هو تحميل مهام الأرصدة عبر خوادم متعددة.</span><span class="sxs-lookup"><span data-stu-id="40e99-141">One typical use of batch servers is to load balance jobs across multiple servers.</span></span> <span data-ttu-id="40e99-142">يمكنك تعيين عدد السلاسل التي سيعالجها خادم الدُفعات.</span><span class="sxs-lookup"><span data-stu-id="40e99-142">You can set the number of threads that the batch server will process.</span></span>

<span data-ttu-id="40e99-143">نظراً لأن خوادم الدُفعات هي أيضاً مثيلات AOS نشطة والتي تطلب الخدمة من عملاء تطبيقات Finance and Operations والمكونات الأخرى المرتبطة بها، يجب أن تحدد بدقة متى يجب أن يكون مثيل AOS متاحاً لمعالجة الدُفعات.</span><span class="sxs-lookup"><span data-stu-id="40e99-143">Because batch servers are also active AOS instances that service requests from Finance and Operations apps clients and other associated components, you must carefully determine when an AOS instance should be available to process batches.</span></span>

