---
ms.openlocfilehash: 48b3dca4233aa41243242b49a84f8b120f83cf75
ms.sourcegitcommit: bfcf3cb276d50978eba5dd4b8268a26abfd9783a
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 08/17/2021
ms.locfileid: "7436321"
---
ستحتاج إما إلى بيئة تجريبية أو بيئة تحديد الصلاحيات مع Sales Insights لإكمال هذه البرامج التعليمية. 

### <a name="objective"></a>الهدف

لإنشاء نتيجة تحليلات للإيرادات، والتي تُعرض كل أسبوع في لوحة المعلومات لكافة المستخدمين.

## <a name="step-1-set-a-weekly-recurrence-trigger-for-the-flow"></a>الخطوة 1: تعيين مشغل تكرار أسبوعي للتدفق

لنختار المشغل نفسه كما في السابق، ولكن في هذه المرة، قم بتعديل القيم حتى تعمل مرة واحدة في الأسبوع.

![حوار التكرار مع ضبط الفاصل الزمني على 1 وتعيين التكرار إلى "أسبوع".](../media/assistant-tutorial-3-weekly-frequency.png)

## <a name="step-2-get-all-users-in-the-org"></a>الخطوة 2: تحديد جميع المستخدمين في المؤسسة

لنستخدم أيضاً الإجراء نفسه كما في السابق للحصول على قائمة المستخدمين من مؤسسة Dynamics 365 الخاصة بك.

![إجراء سجلات القوائم مع تعيين البيئة إلى استوديو المساعد وتعيين اسم الجدول إلى المستخدمين.](../media/assistant-tutorial-3-list-records.png)

وسنحصل الآن على الفرص المتاحة لجميع المستخدمين وحساب إجمالي الإيراد الذي تم الحصول عليه لكافة الفرص المغلقة في الأسبوع الماضي.

وللقيام بهذه الخطوة، تجب إضافة إجراء جديد، مثل **سجلات القائمة** وإحضار الفرص.

ونستخدم عمودين إضافيين في هذه الحالة:

-   **تحويل التجميع**: يُستخدم لإضافة الإيراد إلى كافة الفرص التي تم إرجاعها. نستخدم **التجميع (القيمة الفعلية مع مجموع مثل القيمة الفعلية)**.

-   **استعلام عامل التصفية**: يوفر القدرة على تصفية بعض البيانات استناداً إلى بعض الشروط. وفي الحالة التي لدينا، نرغب في الحصول على الفرص التي تم إغلاقها في الأسبوع الماضي ويمتلكها المستخدم الحالي. الشرط هو مزيج من النص والتعبيرات والمحتوى الديناميكي كما في الأمثلة السابقة:

    `actualclosedate le ***expression1**_ and actualclosedate ge _*_expression2_*_ and \_ownerid\_value eq _*_dynamicContent_**`

وفي هذا المثال، نستخدم القيم الآتية:

-   *التعبير 1* على النحو **utcNow()**

-   *التعبير 2*  على النحو **addDays(utcNow(), -7)**

-   *dynamicContent‎* على أنه **مستخدم**

![يتم تعيين استعلام التصفية إلى actualclosedate le utcNow() and actualclosedate ge addDays(...) and \_ownerid_value eq User.](../media/assistant-tutorial-3-filter-query.png)

## <a name="step-3-create-the-insights-card"></a>الخطوة 3: إنشاء بطاقة المعلومات 

لنقم بإنشاء البطاقة، حدد **إضافة إجراء**، وقم بإضافة إجراء **إنشاء بطاقة للمساعد**. قم بتعبئة القيم المطلوبة.

![طبِّق على كل إجراء من إجراءات سجلات القائمة، ثم طبقها على كل 2 مع إنشاء بطاقة لإجراء المساعد.](../media/assistant-tutorial-3-create-card.png)

هل تحتاج إلى مساعدة؟ تواصل معنا من خلال [منتديات المجتمع](https://aka.ms/studioforums/?azure-portal=true).
