---
ms.openlocfilehash: f9cc982eded75ceb56fac2add28537ad534539bc
ms.sourcegitcommit: c1858cd3b2bd6663edff36e214795d4934ad3ddf
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 09/22/2022
ms.locfileid: "9575878"
---
تقدم هذه الوحدة الأنماط الشائعة (أفضل الممارسات) التي تمت ملاحظتها بين العملاء واستخدام الكتابة المزدوجة لتوفير فهم أفضل للآثار الواقعية واستخدامات التكامل. من هذه السيناريوهات الفعلية توجد الأنماط التالية (أفضل الممارسات) والأنماط المضادة (الصعوبات) للكتابة المزدوجة والمزامنة الأولية والمزامنة المباشرة والعمليات الأخرى. 

## <a name="initial-sync"></a>المزامنة الأولية
تتيح لك الكتابة المزدوجة مزامنة البيانات الأولية بين تطبيقات التمويل والعمليات Dataverse. الاستخدام الأفضل للمزامنة الأولية هو إنشاء البيانات الأولية للأحجام المنخفضة؛ إنها غير مخصصة لمعالجة أحمال عمل بيانات كبيرة لأغراض ترحيل البيانات. وفي الواقع، يجب عدم تمكين تعيين جدول الكتابة المزدوجة أو إجراء مزامنة أولية حتى تكتمل جميع عمليات ترحيل البيانات. توفر المزامنة الأولية بيانات من تطبيق الوجهة إلى التنفيذ الأحدث.

على سبيل المثال، إذا كان لديك تنفيذ كامل للتمويل والعمليات، وقمت بإضافة تطبيق Microsoft Dynamics 365 Customer Engagement، فقد تكون المزامنة الأولية مفيدة في مساعدتك على نقل البيانات الموجودة من تطبيقات التمويل والعمليات إلى Customer Engagement للبدء في تنفيذ Customer Engagement دون انتظار سيناريو ترحيل البيانات. علاوةً على ذلك، لن تؤدي المزامنة الأولية للكتابة المزدوجة إلى الكتابة فوق البيانات الموجودة في أي من البيئتين.

إذا احتجت إلى إعادة تعيين البيانات أو إعادة إنشائها في أي من النظامين، فإننا نوصي بتنظيف البيئة قبل إجراء المزامنة الأولية. احرص على التحقق من بياناتك الرئيسية للمزامنة الأولية، ثم تأكد من أنه تم التخطيط لإجراء مزامنة أولية لجميع الحقول والحقول المصفاة والكيانات القانونية. يوجد حد موضوع من 500,000 صف لكل عملية تشغيل و70,000 لجدول ذي مؤشر ترابط واحد. إذا كانت المزامنة الأولية أعلى من هذه الحدود، فيجب عليك ترحيل البيانات إلى كل بيئة (تطبيقات التمويل والعمليات أو Dataverse) بشكل منفصل ثم تخطي المزامنة الأولية. هناك خيار آخر وهو مزامنة الكثير من الكيانات القانونية، الواحد بعد الآخر، بدلاً من مزامنتها كلها مرة واحدة. 

لمزيد من المعلومات، راجع [اعتبارات المزامنة الأولية](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/initial-sync-guidance/?azure-portal=true). 

## <a name="piggybacking-or-async-implementation"></a>Piggybacking أو التنفيذ غير المتزامن
يتم تشغيل مزامنة الكتابة المزدوجة كخطوة أخيرة قبل الالتزام بحركات قاعدة البيانات في التطبيق المصدر. ويتم إرسال نفس محتوى الحركة لجميع السجلات ذات الصلة إلى التطبيق الهدف كدُفعة واحدة. وسيتم تنفيذ حركة قاعدة البيانات المصدر فقط عندما يتم قبول الدُفعة بالكامل في التطبيق الهدف. لن تُعاد مزامنة الحقول التي تم تعيينها في التطبيق الهدف كجزء من حركة الإنشاء أو التحديث مع المصدر. يُشار إلى هذا السيناريو باسم piggybacking وهو غير مسموح به لمنع التكامل الدائري اللانهائي. 

على سبيل المثال، يتم إنشاء بند عرض أسعار المبيعات في Microsoft Dynamics 365 Sales. تتم مزامنة سجل بند عرض أسعار المبيعات هذا مع تطبيقات التمويل والعمليات ويتم إنشاؤه في هذا التطبيق. كجزء من الإنشاء في تطبيقات التمويل والعمليات، يقوم بعض منطق الأعمال بتشغيل العديد من الحقول وإيقافها افتراضياً، مثل **الموقع** و **المستودع**. لا يُعاد تعيين هذه الحقول في Dynamics 365 Sales. في هذه الحالة، نوصي بنسخ المنطق الافتراضي في Dynamics 365 Sales لمطابقة السجلات الافتراضية في تطبيقات التمويل والعمليات. 

من وقت إلى آخر، هناك خيار آخر وهو نقل المنطق الافتراضي إلى مهمة منفصلة غير متزامنة يمكنها تحديث السجل في حركة منفصلة وإعادة تشغيل المزامنة مع التطبيق المصدر بطريقة آمنة. تعتبر هذه العملية بمثابة نمط مضاد (صعوبة) لأن الأداء قد يتأثر، لذلك يجب عليك تقييمها على أساس كل حالة على حدة. 

## <a name="custom-triggers-on-lookup-columns-in-customer-engagement-apps"></a>المشغلات المخصصة في أعمدة البحث في تطبيقات تفاعل العميل
يتعلق هذا السيناريو على وجه التحديد بالبيانات الرئيسية والتفاصيل أو الرأس والبنود في الكتابة المزدوجة. 

**مثال**

أنت في طابق مبيعات الشركة، ومهمتك الوحيدة هي إضافة عرض أسعار في تطبيق Dynamics 365 Sales. تريد إكمال هذه المهمة بسرعة، بدون إضافات، وبدون متطلبات من منظور النظام. أنت تتحدث إلى أحد العملاء، وتدخل معلوماته، وتنشئ عرض أسعار. وستقوم في وقت لاحق بملء بقية المعلومات، عندما تصبح جاهزة للمزامنة بين Dynamics 365 Sales وDynamics 365 Supply Chain Management. 

في هذه الحالة، تريد إدخال عرض أسعار ومزامنة عرض الأسعار فقط عند وضع علامة عليه كجاهز للتكامل. للقيام بذلك، يمكنك إنشاء عمود مخصص على رأس عرض الأسعار لاستخدامه كمشغل عندما يكون جاهزاً للتكامل. كخطوة تالية، يمكنك إنشاء عمود مخصص في جدول بند عرض الأسعار كحقل محسوب. بعد ذلك، ستعيّن عامل التصفية على تعيين جدول الكتابة المزدوجة **رأس عرض الأسعار** وتعيين **بند عرض الأسعار‏‎** لتلك الحقول للحصول على القيمة الصحيحة في الأعمدة المحسوبة. نظراً لتحديث العمود المخصص في الرأس، سيعمل مشغل الكتابة المزدوجة وسيقوم بتشغيل تكامل الكتابة المزدوجة في الصفوف ذات الصلة. تنشئ هذه العملية تكاملاً فعالاً عند الطلب بالاستناد إلى تحديث الأعمدة المخصصة. 

## <a name="finance-and-operations-apps-transactions--header-and-lines-in-the-same-transaction"></a>معاملات تطبيقات التمويل والعمليات - الرأس والبنود في نفس المعاملة
بالنسبة لأي معاملة، تقوم تطبيقات التمويل والعمليات بإنشاء البيانات دفعة واحدة ثم إرسالها كدفعة إلى Dataverse. إذا تم إنشاء سجلين كجزء من الحركة نفسها، وهما يشيران إلى بعضهما البعض، فسيحدث خطأ، مثل "تعذّرت كتابة البيانات إلى الكيان X. تعذّر البحث عن الكيان بالقيم XXXX. تعذّر البحث عن الكيان X بالقيم XXXX ". في هذه الحالة، يكون التخفيف من حدة المشكلة هو إنشاء علاقات كيان داخل تطبيقات التمويل والعمليات للإشارة إلى النظام الأساسي للكتابة المزدوجة بأن الكيانين مرتبطان وأن هناك علاقات بين السجلين اللذين يعالجان في هذه الحالة في نفس المعاملة. 
  
> [!div class="mx-imgBorder"]
> [![لقطة شاشة تميّز كيان بند عرض الأسعار والعلاقات.](../media/sales-order-line-entity.png)](../media/sales-order-line-entity.png#lightbox)

## <a name="virtual-tables-and-dual-write"></a>الجداول الظاهرية والكتابة المزدوجة‬
وصفت الوحدات النمطية [البدء في دمج تطبيقات التمويل والعمليات مع Microsoft Power Platform](/training/modules/get-started-integrate-finance-operations-power-platform/?azure-portal=true) و[استخدم المفاهيم الأساسية والإعداد لدمج تطبيقات التمويل والعمليات مع Microsoft Power Platform](/training/modules/key-concepts-integrate-finance-operations-power-platform/?azure-portal=true)الكيانات الظاهرية كخيار للوصول إلى البيانات بين تطبيقات التمويل والعمليات وDataverse دون نسخ المعلومات فعلياً بين التطبيقين. لن توجد البيانات في كلتا قاعدتي البيانات للتطبيقات وستوجد فقط في تطبيقات التمويل والعمليات. لتحديد الخيار الأنسب لبياناتك، يجب عليك استكشاف بعض اعتبارات التصميم. 

يعتبر موقع بيانات الجداول الظاهرية أحد الاعتبارات المهمة. إذا تطلبت دورة العمل نسخ البيانات فعلياً فقد لا تكون الجداول والكيانات الظاهرية الحل المناسب لك. وفي هذه الحالة، ستحتاج إلى استخدام تكامل الكتابة المزدوجة للتأكد من وجود نسخة من البيانات في التطبيقين. 

اطرح على نفسك الأسئلة التالية المتعلقة بتحليلات البيانات: 
- هل تملي احتياجات العمل حاجة التحليلات إلى الاعتماد على بيانات المصدر؟ 
- هل تم وضع متطلبات زمن الانتقال؟ 
- هل تم وضع متطلبات زمن انتقال منخفض للبيانات التي يجب نسخها من نظام إلى نظام؟ 
- هل تكاليف المعاملات واستنساخ البيانات عالية؟

لا تنسخ الجداول الافتراضية البيانات المادية إلى تطبيقات Dataverse. توفر الجداول الظاهرية خيار زمن انتقال منخفض للبيانات التي يجب نسخها أو نسخها بشكل متماثل ويمكن أن تكون حلاً مفيداً لنسخ البيانات. ولأن الجداول الظاهرية لا تنسخ البيانات فعلياً إلى Dataverse، فسيتعين عليك التفكير في هذا الحل عن طريق استخدام الجداول الظاهرية لتخزين ومعالجة البيانات لبيانات الحركات، مثل حركات البيع بالتجزئة أو المخزون الفعلي. 

ومع ذلك، فإن الكتابة المزدوجة تعالج سيناريوهات حيث يجب نسخ البيانات فعلياً بين التطبيقات. 
