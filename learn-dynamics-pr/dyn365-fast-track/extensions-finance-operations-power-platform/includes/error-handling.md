---
ms.openlocfilehash: 24459884697a0500aefa592672c1352fac424236
ms.sourcegitcommit: 15d65295c1240630d69e5e451d1d01f3337489a8
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/02/2022
ms.locfileid: "8840210"
---
تصف الوحدة النمطية [العمل باستخدام الأدوات وأفضل الممارسات لتكامل تطبيقات التمويل والعمليات مع Microsoft Power Platform](/learn/modules/tools-finance-operations-power-platform/?azure-portal=true) بعض الأخطاء والمشاكل التي يمكنك مواجهتها أثناء تنفيذ الكتابة المزدوجة ومزامنتها. ستتعرف الآن على معالجة الأخطاء في سيناريوهات مختلفة وإجراءات الكتابة المزدوجة. 

## <a name="initial-synchronization"></a>المزامنة الأولية
يتم تشغيل المزامنة الأولية في المرة الأولى التي تقوم فيها بتوصيل بيئة بأخرى والمرة الأولى عندما يتم إنشاء تعيين بين الحقلين أو الجدولين. تقوم هذه العملية بسحب أو تصدير البيانات المجمعة من النظام المصدر والنظام الهدف، مما يضمن توفر المعلومات في تطبيقات التمويل والعمليات وDataverse. تحدث هذه العملية لكيان قانوني واحد في كل مرة، وهناك احتمالية لنقل الكثير من البيانات عبر هذا الاتصال. 

### <a name="long-running-synchronization"></a>مزامنة تستمر لفترة طويلة
أحد السيناريوهات الأكثر شيوعاً التي قد تتعامل معها لهذه المزامنة الأولية هو تشغيلها لفترة طويلة. وفي هذه الحالة، قد توجد عدة مشاكل محتملة. 

#### <a name="potential-issue---the-number-of-companies-present-in-the-initial-sync"></a>المشكلة المحتملة - عدد الشركات الموجودة في المزامنة الأولية
نظراً لتشغيل المزامنة الأولية لكل شركة، بحسب النطاق الترددي الموجود لديك لكل نظام، ولأنها تتوسع إلى 100 سجل في الدقيقة، فمن المحتمل أن تعمل لفترة طويلة. 

فيما يتعلق بهذه المشكلة، ننصحك باختيار مجموعة فرعية أصغر من الشركات للمزامنة الأولية إذا كانت مجموعة البيانات الأولية كبيرة وتمتد عبر شركات متعددة. يمكنك إضافة أربع إلى خمس شركات في نفس الوقت للتأكد من انتهاء عمليات المزامنة وعدم انقضاء مهلتها.

#### <a name="potential-issue---the-number-of-dependent-entities"></a>المشكلة المحتملة - عدد الكيانات التابعة 
تم تصميم الكتابة المزدوجة لتحديد أولويات التبعيات المصدر أثناء المزامنة الأولية. إذا كنت تشغل مزامنة أولية للعملاء، فستبحث المزامنة الأولية عن جميع التبعيات المصدر وستضعها أولاً. إذا اخترت كياناً أبعد (كيانًا طرفيًا) أثناء المزامنة الأولية، فقد يتم اختيار الكثير من التبعيات والمعلومات المصدر لتتم مزامنتها في البداية. 

التوصية في هذا السيناريو هي تجنب انتقاء الكيانات "الطرفية" عن طريق اختيار كيانات الجذر، أو المستوى الأصلي، ثم تقسيم المجموعة الفرعية للمزامنة الأولية لمجموعات البيانات الكبيرة. 

#### <a name="potential-issue---large-volumes-of-data-to-import-for-finance-and-operations-apps"></a>المشكلة المحتملة - كميات كبيرة من البيانات يجب استيرادها إلى تطبيقات التمويل والعمليات
تحدث هذه المشكلة عادةً عندما يكون لديك عملية تنفيذ موجودة وكمية كبيرة من البيانات في Dataverse، وتحتاج إلى استيرادها إلى تطبيقات التمويل والعمليات. الكتابة المزدوجة ليست بديلاً عن ترحيل البيانات، حيث أن عملية الترحيل أكثر عمقاً وتتضمن ضوابط وتوازنات لضمان تكامل البيانات على أحجام كبيرة. لم يكن الغرض من المزامنة الأولية حل هذه المشكلة. ومع ذلك، قد توجد كميات كبيرة من البيانات خارج سيناريو ترحيل البيانات. وفي هذه الحالة، تكون اعتبارات الأداء ضرورية للكيان الذي يستورد معلمات التنفيذ. للحصول على المزيد من المعلومات، راجع [نظرة عامة حول مهام استيراد البيانات وتصديرها‬ - عمليات الاستيراد الموازية](/dynamics365/fin-ops-core/dev-itpro/data-entities/data-import-export-job#parallel-imports/?azure-portal=true) و[تحسين ترحيل البيانات لتطبيقات التمويل والعمليات](/dynamics365/fin-ops-core/dev-itpro/sysadmin/optimize-data-migration/?azure-portal=true).

#### <a name="potential-issue---dataverse-throttling-with-large-volumes-of-data"></a>المشكلة المحتملة - تقييد Dataverse بكميات كبيرة من البيانات
تحدث هذه المشكلة عادةً عند نقل البيانات القديمة في تطبيقات التمويل والعمليات عبر الكتابة المزدوجة.

لمنع حدوث هذه المشكلة، يمكنك استخدام عوامل التصفية أو الأعمدة المحسوبة لتقليل كمية البيانات القديمة أو المؤرشفة التي قد لا تكون مطلوبة في Dataverse. 

## <a name="live-sync"></a>المزامنة المباشرة
تبدأ المزامنة المباشرة بعد اكتمال المزامنة الأولية. ستنتقل خرائط الكتابة المزدوجة إلى وضع المزامنة المباشرة، الذي يقوم باستمرار بتحديث البيانات بناءً على تعيينات الجدول المقترنة بتعقب التغييرات الذي تم تمكينه في الكيانات. هذه المشاكل شائعة وتحدث بشكل متكرر. تقدم الأقسام التالية شرحاً للتوصيات الخاصة بالتعامل مع هذه المشاكل. 

### <a name="unable-to-sync-data"></a>تعذر مزامنة البيانات
فكر في سيناريو قمت فيه بتمكين الكتابة المزدوجة، ولكن لا يبدو أن التغييرات من تطبيقات التمويل والعمليات تتزامن مع Dataverse. بشكل عام، يمكنك إجراء عدة عمليات فحص للتحسين وللتأكد من أن البيانات التي تتم مزامنتها هي البيانات المطلوبة. 

#### <a name="potential-issue---changes-arent-part-of-the-transaction"></a>المشكلة المحتملة - التغييرات ليست جزءاً من الحركة
يتم تشغيل الأحداث على أحداث ما قبل الالتزام، والتي تعد جزءاً من عملية الفحص للتأكد من أنه يجب نقل البيانات من تطبيقات التمويل والعمليات. 

إذا كانت التخصيصات موجودة، فمن المستحسن أن تتأكد من وجود البيانات داخل الحركة. وإذا لم تظهر البيانات التي تتوقع مزامنتها، فقد تكون عندئذٍ خارج نطاق الحركة. 

#### <a name="potential-issue--the-doupdatesinsertdeletes-record-set-operations-and-skip-business-events-properties-are-set-to-true"></a>المشكلة المحتملة - تعيين الخصائص DoUpdates/Insert/Deletes وRecord Set Operations وSkip Business Events إلى صواب 
في هذه الحالة، ليس بإمكان عمليات مجموعة السجلات وأحداث الأعمال الاستماع إلى التغييرات. عندما تستخدم هذه الأوامر داخل التعليمات البرمجية، فإن الهدف العام هو تخطي الكثير من منطق الأعمال. 

ننصحك بالمحافظة على الأساليب الحالية Create وUpdate وDelete وUpdate. ستحتاج إلى التأكد من أن تعديلات التطبيق هي جزء من طرق مستوى الجدول التي يتم الاستماع إليها من خلال المزامنة المباشرة للكتابة المزدوجة.

#### <a name="potential-issue---untracked-table-from-the-entity"></a>المشكلة المحتملة - جدول غير متعقب من الكيان
لا يتم تعقب مصادر البيانات التي لا تحتوي على أي حقول معينة أو تم تعيينها لعملية بحث فقط، أو حتى صلة خارجية للقراءة فقط. 

تأكد من العودة إلى تعيينات الحقول للتأكد من تعيين الجداول والحقول. بخلاف ذلك، يمكنك استخدام أسلوب التجاوز **getEntityDataSourceToFieldMapping** لتضمين مصادر البيانات غير المتعقبة في منطق الأعمال الخاص بالكيان. 
### <a name="performance"></a>الأداء 
في بعض الحالات، قد تجد أن التكامل بين تطبيقات التمويل والعمليات وDataverse من خلال الكتابة المزدوجة يتم ببطء ولا يتزامن بسرعة. وفي هذه الحالة، قد توجد عدة مشاكل محتملة.

#### <a name="potential-issue---the-entity-query-plan-is-unoptimized"></a>المشكلة المحتملة - خطة استعلام الكيان غير محسّنة
يُستخدم استعلام الكيان لتحديد السجلات والحقول الفريدة التي يتم استخدامها للتعيينات. 

نوصي بتشغيل تحليل الأداء في خطة استعلام الكيان لتحديد ما إذا كانت تعمل بشكل صحيح ومحسّن. يمكنك أيضاً تقليل تعقيدات الكيان من خلال تجاهل الصلات والارتباطات غير الضرورية. علاوةً على ذلك، نوصي بتشغيل تحليل الفهرس على النطاقات المستخدمة في الاستعلام للتأكد من أنها محسنة. 

#### <a name="potential-issue---multiple-tracked-tables-for-each-entity"></a>المشكلة المحتملة - جداول متعقبة متعددة لكل كيان
يتم تعقب تعديلات الكيان للجداول المستخدمة في التعيينات. إذا تم تعديل جميع الجداول المتعقبة كجزء من حركة، فيُحتمل وجود أحداث متعددة لنفس سجل الكيان، جنباً إلى جنب مع خطة استعلام غير محسنة. بإمكان هذه المشكلة أن تؤثر على الأداء.

بالنسبة لهذا السيناريو، نوصي باتخاذ خطوات مماثلة مثل المشكلة الأولى المحتملة، وهي تحليل خطة الاستعلام. يمكنك أيضاً استخدام أسلوب التجاوز **dualWriteShouldSkipDataSource** في منطق الأعمال الخاص بالكيان أو الملحق لتخطي الجداول المتعقبة غير المطلوبة. يوجد هذا الأسلوب، والكثير من الأساليب الأخرى على **CustCustomerV3Entity**، الموجود في تطبيقات التمويل والعمليات بشكل افتراضي. 

#### <a name="potential-issue---similar-tables-are-tracked-for-multiple-entities"></a>المشكلة المحتملة - تعقب جداول مماثلة لكيانات متعددة
يتم تعقب جداول مشتركة لكيانات متعددة، مما قد يؤدي إلى تنفيذ أحداث لجميع الكيانات المرتبطة، وتحديداً إذا كانت تعمل على خطة استعلام غير محسنة، مما قد يؤثر على أداء التكامل مع الكتابة المزدوجة. 

لحل هذه المشكلة، ننصحك بتشغيل عملية فحص على مجموعة **businessEventsDefinition** حسب الحقلين **RefTableName** و **RefEntityName**. 

### <a name="data-failures-and-validations"></a>حالات فشل البيانات وعمليات التحقق من صحتها
بخلاف الأداء، هناك مشاكل شائعة أخرى تتعلق بحالات فشل البحث. 

#### <a name="potential-issue---dependent-records-arent-available-in-dataverse"></a>المشكلة المحتملة - السجلات التابعة غير متوفرة في Dataverse
تتضمن عمليات البحث بيانات مرجعية مطلوبة كجزء من حل الحركة. حتى إذا تم وضع علامة على البيانات باعتبارها خالية في Dataverse، فإن عمليات البحث مطلوبة إذا تم تعيين الجداول والحقول في الكتابة المزدوجة.

نوصي بتحليل ما إذا كانت البيانات المرجعية قد تم إنشاؤها قبل الحركة أم هي جزء من الحركة. للحصول على معلومات مفصلة حول الحمولة، يمكنك استخدام وضع التصحيح في المزامنة المباشرة لإجراء المزيد من عمليات التحقق. 

#### <a name="potential-issue---dependent-records-arent-created-as-part-of-the-transaction"></a>المشكلة المحتملة - لا يتم إنشاء السجلات التابعة كجزء من الحركة
نظراً لإنشاء تبعيات المصدر كجزء من الحركة، لن يتم حلها عند حل البحث، لذلك ستفشل. 

تعتمد حلول البحث على علاقات الكيانات في تطبيقات التمويل والعمليات. ويمكنك إضافة علاقات على جميع الكيانات ذات الصلة التي تشكل جزءاً من الحركة. 
