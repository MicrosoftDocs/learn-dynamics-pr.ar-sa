---
ms.openlocfilehash: fa0a0daac44ff756061b886ae94be323716f2969
ms.sourcegitcommit: 42a0faa4dc64a860f6457449b0792257c2254757
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 09/23/2022
ms.locfileid: "9584272"
---
في هذا التمرين، ستقوم بما يلي:

- توسيع نموذج بيانات Dataverse وإضافة جدول مخصص جديد **للشريحة**.
- توسيع تعيين جدول **العملاء V3 (الحسابات)** وإضافة عمود **الشريحة** في التعيين.

## <a name="scenario"></a>السيناريو

إن شركة Contoso Manufacturing Germany ‏(DEMF) هي شركة عالمية لتصنيع الأجهزة الإلكترونية المنزلية والخاصة بالسيارات. ويقوم موظفو المبيعات بإنشاء عملاء متوقعين وإعداد وإرسال عروض أسعار المبيعات وأوامر المبيعات والحفاظ على علاقات العميل.

في هذا المثال، سيُطلب منك إعداد تطبيقات Dynamics 365 Sales وDynamics 365 Finance وDynamics 365 Supply Chain Management مع الكتابة المزدوجة لضمان عدم دمج عروض أسعار المبيعات في Supply Chain Management من دون استكمالها أولاً في Dynamics 365 Sales. ستكمل هذه المهمة عن طريق توسيع تعيين جدول موجود لتضمين عمود إضافي. بعد ذلك، ستستخدم هذا العمود لتصفية عروض الأسعار المكتملة لإجراء الدمج.

## <a name="prerequisites"></a>المتطلبات الأساسية 
[التمرين - تثبيت الكتابة المزدوجة](/training/modules/key-concepts-integrate-finance-operations-power-platform/exercise-install-dual-write/?azure-portal=true) عبارة عن متطلب أساسي للتمارين في هذه الوحدة النمطية. يجب تثبيت التطبيقات/الحلول التالية:

- بيئة تطبيقات التمويل والعمليات مع بيانات العرض التوضيحي القياسية لشركة Contoso
- Dynamics 365 Sales
- حل الكتابة المزدوجة الأساسي
- حل تنسيق تطبيق الكتابة المزدوجة (يجب إعداد الكتابة المزدوجة وفق ما تم توضيحه في [متطلبات النظام والشروط الأساسية](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/requirements-and-prerequisites/?azure-portal=true) و[استخدام معالج الكتابة المزدوجة لربط بيئاتك‬‏‫](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/link-your-environment/azure-portal=true)).

علاوةً على ذلك، تأكد من ارتباط الكيان القانوني **DEMF** بين تطبيقات تفاعل العملاء وتطبيقات التمويل والعمليات.

تأكد من تمكين خرائط الجدول التالية ومن مزامنتها من تطبيقات التمويل والعمليات إلى Dataverse:

- العملاء V3 (الحسابات)‬ 
- جدول الدفع 
- أيام الدفع CDS 
- شروط الدفع 
- مجموعات العملاء 
- مجموعات ضرائب المبيعات 
- طريقة دفع العميل 
- العملات 


## <a name="extend-the-dataverse-data-model"></a>توسيع نموذج بيانات Dataverse

تتضمن تطبيقات التمويل والعمليات جدول **الشريحة**، المتوفر كحقل في سجل العميل. لا يتوفر هذا العمود في Dynamics 365 Sales. يتمثل نطاق هذا التدريب في توسيع نموذج بيانات Dataverse لإضافة هذا العمود على جدول **الحساب**.

تشرح الخطوات التالية كيفية توسيع نموذج بيانات Dataverse. أولاً، يجب عليك تسجيل الدخول إلى [Power Apps Maker Portal](https://make.preview.powerapps.com/?azure-portal=true). 
1. حدد بيئة Dataverse الصحيحة في الشريط العلوي.
2. انتقل إلى **الحلول** وأنشئ حلاً جديداً. 

    فيما يتعلق بهذا التمرين، اترك **الناشر الافتراضي** محدداً، ولكن يمكنك دائماً تحديد ناشر خاص بك في سيناريو تخصيص واقعي.

3. حدد الحل الذي أنشأته مؤخراً، ثم أنشئ جدول **الشريحة** الجديد. 
    - أدخل **الشريحة** في حقل **اسم العرض للجدول الجديد**.
    - أدخل **كود الشريحة** في عمود **الاسم الأساسي**.
    - حدد **إنشاء**.
4. حدد جدول **الشريحة**، ثم حدد **إضافة عمود** لإنشاء عمودين: **الوصف، نوع بيانات النص والشركة، نوع بيانات البحث**. تأكد من توسيع جميع الجداول الخاصة بالشركة (نظام أو مخصصة) بحيث يكون لديها علاقات متعدد إلى واحد (N: 1) مع الجدول **cdm_Company**.
5. حدد زر **حفظ الجدول** لحفظ التغييرات.
6. أنشئ المفتاح البديل الذي يسمح بإنشاء مفتاح تكامل بشكل تلقائي بعد إنشاء تعيين جدول الكتابة المزدوجة.
    - حدد علامة تبويب **المفاتيح**.
    - حدد **إضافة مفتاح**.
    - في حقل **اسم العرض**، أدخل **SegmentKey**.
    - حدد عمود **الشركة**.
    - حدد عمود **كود الشريحة**.
    - حدد **تم**.
7. أضف العمودين الجديدين **الشركة** و **الوصف** في النموذج الرئيسي **معلومات الشريحة** وطرق العرض التالية:
    - الشرائح النشطة
    - الشرائح غير النشطة
    - طريقة عرض البحث عن الشريحة
8. أضف جدول **الحساب** إلى الحل.
    - حدد الحل **Exercise1_SegmentExtension** ثم حدد **إضافة موجود**. 
    - حدد **الجدول > الحساب**، ثم حدد **التالي**.
    - اترك خانتي الاختيار **تضمين جميع المكونات** و **تضمين بيانات تعريف الجدول‬** من دون تحديد، ثم حدد **إضافة**.
9. أضف عمود **البحث عن الشريحة‬** إلى جدول **الحساب**.
    - حدد **إضافة عمود**.
    - أدخل **الشريحة** في حقل **اسم العرض**.
    - حدد **بحث‏‎** في حقل **نوع البيانات**.
    - حدد **تم**.
    - حدد **حفظ الجدول**.
10. أضف عمود **الشريحة‬** إلى النموذج الرئيسي لجدول **الحساب**.
    - أضف النموذج الرئيسي **الحساب** إلى الحل.
    - حدد نموذج **الحساب** عن طريق الانتقال إلى علامة تبويب **جدول الحساب > النماذج**.
    - في مصمم النماذج، أضف عمود **الشريحة**.
    - حدد حقل **النموذج**.
    - اسحب عمود **الشريحة** من اللوحة اليمنى، ثم قم بإسقاطه في النموذج تحت عمود **معرف مجموعة العملاء**.
    - حدد **حفظ**.
11. في عمود **الشريحة**، طبّق التصفية بالاستناد إلى سياق **الشركة**، ثم حدد النموذج **تبديل إلى الوضع الكلاسيكي** في مصمم النماذج.
12. حدد **حفظ وإغلاق**.
13. حدد الحل في Power Apps Maker Portal ثم حدد **نشر جميع التخصيصات‬‏‫**.
14. تأكد تم تطبيق التغييرات.
    - سجل دخولك إلى تطبيق مبيعات Dataverse.
    - حدد صف حساب لعرض التغييرات في النموذج.

## <a name="extend-the-customers-v3-accounts-table-map"></a>توسيع تعيين جدول العملاء V3 (الحسابات)

لتوسيع تعيين جدول العملاء V3 (الحسابات)، اتبع الخطوات التالية.

1. سجل دخولك إلى تطبيقات التمويل والعمليات.
2. انتقل إلى **مساحات العمل > إدارة البيانات**، ثم حدد الإطار المتجانب **الكتابة المزدوجة**.
3. من صفحة قائمة **خرائط جدول الكتابة المزدوجة**، أكمل الخطوات التالية:
    - ابحث عن تعيين جدول **العملاء V3 (الحسابات)**.
    - حدد التعيين من القائمة.
    - حدد **إيقاف**.
4. حدد **العملاء V3 (الحسابات)**، وحدد الزر **حفظ باسم** ثم احفظ تعيين الجدول الجديد.
5. حدد **العملاء V3 (الحسابات)** ثم حدد **تحديث الجداول** لتحديث بيانات تعريف Dataverse.
6. حدد **إضافة تعيين** لإضافة تعيين عمود جديد.
7.  حدد **بلا** إلى اليمين، وحدد العمود **SALESSEGMENTID** ، ثم حدد **موافق**.
8. حدد **بلا** إلى اليسار، وحدد العمود **new_segment.new_segmentcode [Segment (Segment code)]**، ثم حدد **موافق**. يمكنك تصفية الأعمدة عن طريق إدخال نص خاص بك.
9. حدد **حفظ** لحفظ التغييرات ثم عد إلى قائمة **تعيين جدول الكتابة المزدوجة** عن طريق تحديد **الكتابة المزدوجة**.
10. حدد **مفتاح التكامل‎**.
11. قم بالتمرير للعثور على صف **الشريحة**، ثم تحقق من إنشاء مفتاح التكامل من المفتاح البديل في Dataverse الذي أنشأته في وقت سابق.
12. من قائمة **تعيين جدول الكتابة المزدوجة**، حدد **إضافة تعيين جدول**.
13. حدد جدول **شرائح العمل‬** في جدول **تطبيقات التمويل والعمليات** وجدول **Dataverse**، ثم قدم معلومات في حقول **الناشر** و **الإصدار** و **الوصف**.
14. حدد **حفظ**.
15. حدد خريط الجدول الجديدة التي أنشأتها ثم أضف الأعمدة.
    - عيّن العمود **SEGMENTCODE** من تطبيقات التمويل والعمليات إلى العمود **new_segmentcode** على جانب Dataverse.
    - عيّن العمود **SEGMENTDESCRIPTION** من تطبيقات التمويل والعمليات إلى العمود **new_description** على جانب Dataverse.
16. ابحث عن الخيار **شرائح العمل (new_segments)** وحدده في قائمة خرائط جداول الكتابة المزدوجة، ثم حدد **تشغيل**.
17. حدد خيار **المزامنة الأولية**، ثم عيّن البيانات الرئيسية للمزامنة الأولية باعتبارها تطبيقات التمويل والعمليات.
18. حدد **تشغيل**.
19. تأكد من مزامنة الشرائح في Dataverse. انتقل إلى Dynamics 365 Sales واستخدم ميزة **البحث المتقدم** لاسترداد صفوف الشرائح.
20. ابحث عن الخيار **العملاء V3 (الحسابات)‬** وحدده في قائمة خرائط جداول الكتابة المزدوجة، ثم حدد **تشغيل**.
21. حدد خيار **المزامنة الأولية**، ثم عيّن البيانات الرئيسية للمزامنة الأولية باعتبارها تطبيقات التمويل والعمليات.
22. حدد **تشغيل**.
23. اختبر تغييراتك. قم بتغيير قيمة شريحة أحد العملاء وتحقق من مزامنة التغييرات بين التطبيقين.
