---
ms.openlocfilehash: 36e3788cbe3e0dab5ce1b2a0f4693f1297da531e
ms.sourcegitcommit: c1858cd3b2bd6663edff36e214795d4934ad3ddf
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 09/22/2022
ms.locfileid: "9576868"
---
كي تعمل المزامنة المباشرة بشكل صحيح، وللبدء، ستحتاج إلى الوفاء بمتطلبات أساسية معينة. يجب أن تكون جميع التغييرات التي يجب أن تحدث في مصدر بيانات معين موجودة في الحركة نفسها. ومع ذلك، يجب ألا تحتوي الكيانات على تحديثات أو إدخالات مستندة إلى مجموعة تم إعدادها عليها أو تعمل حالياً عليها لأن هذه التحديثات أو الإدخالات لن تؤدي إلى تشغيل أحداث أعمال، وبالتالي، الكتابة المزدوجة. إذا تم تعيين الخاصية على الكيان **skipBusinessEvents** إلى True، فسيتعذر عندئذٍ تشغيل المزامنة المباشرة، وسيتم تخطي الكيان بواسطة المزامنة المباشرة. في بعض الأحيان، سيتم توصيل الكيانات التي تحتوي على مصادر بيانات باستخدام صلة خارجية. إذا تم تمييز هذه الكيانات باعتبارها صلات خارجيه للقراءة فقط، فلن يكون عندئذٍ خيار **تعقب التغييرات** مؤهلاً للمزامنة المباشرة في مصادر البيانات.

يتم تشغيل التغييرات فقط إذا ظهرت التعديلات في الحقول المعينة في تطبيقات التمويل والعمليات. ستقوم جميع الحقول والتعديلات من Dataverse بتشغيل مزامنة الكتابة المزدوجة. تحتاج عمليات تقييم عوامل التصفية إلى توفير نتيجة صالحة؛ بخلاف ذلك، لن يتم تشغيل المزامنة المباشرة. ستحتاج إلى التحقق من خرائط الحقول في مشروع الكتابة المزدوجة؛ إذا لم يتم تعيين الحقل، فلن يتم تعقبه. علاوةً على ذلك، إذا كانت مصادر البيانات الأخرى التي تحتوي على حقول موجودة ولم يتم تعيينها، كما هو الحال عندما يكون لديك كيان به مصادر بيانات متعددة ويتم استخدام واحد فقط لعلاقة، فلن تقوم هذه الحقول بتشغيل مزامنة مباشرة ولن يتم تعقبها.

إذا كانت سجلات التعيين موجودة في الجداول **DualWriteProjectConfiguration** و **DualWriteProjectFieldConfiguration** و **BusinessEventsDefinition**، فستقوم بتشغيل المزامنة المباشرة وسيتم تعقب التغييرات. إذا تبيّن لك أن الخرائط نشطة في الكتابة المزدوجة، ولكنها ليست كذلك في الجداول المدرجة، فيمكنك استخدام وظيفة Excel الإضافية لتغيير السجلات وإضافة الحقول الإضافية والبيانات المعينة إليها، ثم التأكد من أنها ستعمل مع المزامنة المباشرة. 

## <a name="troubleshoot-live-sync"></a>استكشاف أخطاء المزامنة المباشرة وإصلاحها
قد يكون من الصعب استكشاف أخطاء المزامنة المباشرة وإصلاحها. في هذه الحالة، يمكنك استخدام البيانات المستندة إلى قياس تتبع الاستخدام من Dynamics Lifecycle Services لجمع المعلومات وسرد تغييرات الجدول التي تؤدي إلى أحداث الأعمال وعرض قائمة السجلات المتزامنة وتوفير سجلات للنشاط. تصف قائمة الأوامر التالية كيفية استخدام كل خيار لتلبية احتياجات استكشاف الأخطاء وإصلاحها.

|     الأمر    |     النتيجة    |
|---|---|
|     ProviderName == "Microsoft-Dynamics-AX-BusinessEventsRuntime“   TaskName == "DualWriteRecordsCached“ & “TableToEntityQueryProcessed”    |     سرد تغييرات الجدول التي تؤدي إلى أحداث الأعمال مع عدد السجلات.    |
|     ProviderName == “Microsoft-Dynamics-AX-DualWriteSync” &   activityName == “DualWriteOutbound.WriteToCDS”    |     سرد السجلات المتزامنة من تطبيقات التمويل والعمليات إلى   Dataverse    |
|     ProviderName == “Microsoft-Dynamics-AX-DualWriteSync” & activityName   == “DualWriteInbound.WriteToEntity”    |     سرد السجلات التي تمت مزامنتها من Dataverse إلى تطبيقات التمويل والعمليات    |
|     جميع الأحداث للنشاط = معرف النشاط    |     جميع السجلات لمعرف نشاط معين     |

تحتوي بيئات التطوير على سجلات عارض الأحداث للكتابة المزدوجة التي قد تكون مفيدة أيضًا. للحصول على المزيد من المعلومات، راجع مسار **عارض الأحداث** **سجلات التطبيقات والخدمات > Microsoft > Dynamics > AX-DualWriteSync** لهذه السجلات. لمزيد من المعلومات، راجع [استكشاف الأخطاء العامة وإصلاحها‬](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/dual-write-troubleshooting/?azure-portal=true) حول معلومات استكشاف الأخطاء وإصلاحها لتكامل الكتابة المزدوجة بين تطبيقات التمويل والعمليات وDataverse.

علاوةً على ذلك، يتوفر وضع تصحيح لمزامنة تطبيقات التمويل والعمليات مع تطبيقات Customer Engagement التي ستساعدك في الحصول على سجلات أخطاء مفصلة. حتى لو لم يحدث أي خطأ، لا يزال بإمكانك عرض معرف النشاط للتحقق من السجلات من Lifecycle Services أو معلومات أخرى قد تكون مفيدة من هذه التجربة. في وظيفة Excel الإضافية، يمكنك فتح الجدول **DualWriteProjectConfigurationEntity** لتعيين الحقل **IsDebugMode** إلى True لتعيين جدول واحد أو أكثر. إذا نشرت هذه التغييرات في الجدول **DualWriteProjectConfigurationEntity** للخرائط التي تواجه فيها مشكلة، أو إذا أردت الحصول على المزيد من المعلومات من الوظيفة الإضافية، فيمكنك الوصول إلى السجلات في الجدول **DualWriteErrorLog**. 

للبحث عن البيانات في مستعرض الجدول، انتقل إلى عنوان URL التالي. بدلاً من ذلك، يمكنك إنشاء استعلام لهذا الجدول في SQL Server Management Studio في بيئة التطوير أو بيئة من المستوى 2. يحتوي العمود **DetailedErrorMessage** على جزأين: 

- **VerboseError** – يلتقط النص الطويل للخطأ من Dataverse أو من بيئة تطبيقات تفاعل العميل.

- **DebugLogTrace** - يلتقط الطلب الدُفعي الفعلي المرسل إلى بيئة تفاعل العميل جنباً إلى جنب مع الحمولة. 

مرة أخرى، يمكنك العثور على **ActivityId** للأخطاء، والذي يمكنك استخدامه لفحص جميع سجلات النشاط من مراقبة بيئة Lifecycle Services.  

إذا حدثت أخطاء من Dataverse إلى تطبيقات التمويل والعمليات، فيمكنك استكشاف الأخطاء وإصلاحها من المكون الإضافي تتبع تطبيقات Customer Engagement. في قائمة **إعدادات النظام** (**بيئة Dynamics 365 > الإعدادات > النظام > المسؤول > إعدادات النظام**)، على علامة التبويب **تخصيص**، يمكنك تشغيل تسجيل التتبع للمكون الإضافي ونشاط سير عمل العميل. في العمود **تتبع نشاط سير العمل**، حدد **الكل** لتمكين سجل التتبع لجميع الأنشطة. وإلا، فيمكنك تحديد التسجيل فقط عند حدوث استثناءات. لعرض سجل التتبع هذا، ستحتاج إلى فتح صفحة **الإعدادات** في بيئتك في Dataverse. ضمن **تخصيص**، حدد **سجل تتبع المكون الإضافي**. تأكد من العثور على السجلات حيث تم تعيين العمود **Type Name** إلى **Mircosoft.Dynamics.Integrator.DualWriteRuntime.Plugins.PreCommitPlugin**. انقر نقراً مزدوجاً فوق أحد العناصر لعرض السجل الكامل، ثم انقر فوق علامة التبويب السريعة **التنفيذ**، وراجع نص كتلة الرسالة. 

## <a name="performance-troubleshooting-and-best-practices"></a>استكشاف أخطاء الأداء وإصلاحها وأفضل ممارسات الأداء

إن الأداء عبارة عن عملية تحتاج إلى الاهتمام للتأكد من انتقال البيانات من نظام إلى نظام كما هو متوقع من دون حدوث أي مشاكل تتسبب في إبطاء أداء النظام. ولتجنب حدوث مشاكل غير ضرورية، خذ في الاعتبار المعلومات وأفضل الممارسات التالية للتأكد من عمل التكامل بالشكل المطلوب.

إذا كنت بصدد تنفيذ عملية ترحيل بيانات، فمن المستحسن إيقاف خرائط الكتابة المزدوجة. سيؤدي هذا الإجراء إلى منع مشغلات أحداث الأعمال من مزامنة البيانات عبر المزامنة المباشرة. وهو يضمن أيضًا مزامنة البيانات، عند ترحيلها، بين الأنظمة. 

لتحسين الأداء وتجنب تحميل التطبيقات بشكل زائد، تم وضع حد لعمليات تنفيذ المشروع عند 500,000 صف لكل تنفيذ لكل مشروع لمزامنة أولية. في حال ظهور الحاجة إلى أكثر من 500,000 صف في عملية التشغيل، عندما تتخطى المزامنة الأولية، ننصحك بترحيل البيانات إلى تطبيقات التمويل والعمليات وDataverse بشكل منفصل ثم تخطي المزامنة الأولية. علاوةً على ذلك، إذا كنت تقوم بتشغيل مزامنة أولية من Dataverse إلى تطبيقات التمويل والعمليات، فيجب استلام نتيجة الاستيراد مرة أخرى من تطبيقات التمويل والعمليات في غضون 24 ساعة؛ وإذا حدث بخلاف ذلك، ستنقضي المهلة. 

تم فرض حد من 40 كياناً قانونياً بينما يتم ربط البيئات. إذا حاولت تمكين الخرائط حيث يوجد أكثر من 40 كياناً قانونياً مرتبطاً بين البيئات، فستتلقى رسالة خطأ أثناء المزامنة الأولية. ومع ذلك، تدعم المزامنة المباشرة ما يصل إلى 250 كياناً قانونياً لكل حركة. لمزيد من المعلومات، راجع [قيود الكتابة المزدوجة للمزامنة المباشرة‬](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/sync-limits#legal-entities/?azure-portal=true).

يمكنك استخدام الأعمدة المحسوبة والأعمدة الظاهرية في كيانات تطبيقات التمويل والعمليات. تأكد من مراقبة هذه الأعمدة للأداء الزائد عن الحد من المنطق الإضافي المطلوب لعمليات القراءة والكتابة في هذه الحقول. إذا كنت تستخدم أعمدة ظاهرية لتحويل قيم إضافية أو حسابها من خلال X++ وتتوقع العودة إلى Dataverse في نفس الحركة، فيرجى العلم أن هذا الإجراء غير مسموح به وسيفشل. ضع خطة لتغيير كيفية عمل هذه العملية للتأكد من أن الكتابة المزدوجة والبيئات المرتبطة ستعمل بشكل صحيح.
