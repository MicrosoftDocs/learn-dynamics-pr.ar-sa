---
ms.openlocfilehash: 5e2fd09b9e45f6d6c421c395efb56242c43ff057
ms.sourcegitcommit: 0830f963f25aca3007bac7693b26ca85586936fc
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 05/17/2022
ms.locfileid: "8764475"
---
ستقوم المزامنة الأولية قبل أن تبدأ الكتابة المزدوجة على جدول بمعالجة البيانات الموجودة على كلا جانبي التكامل بين تطبيقات التمويل والعمليات وMicrosoft Dataverse. سيتم نسخ البيانات الموجودة من تطبيق إلى آخر بشكل ثنائي الاتجاه مثل استدعاءات API التي تستخدم CSV Unicode كتنسيق للملف. تحتوي المزامنة الأولية بين بيئة تطبيقات التمويل والعمليات وبيئة Dataverse على مشروع تصدير واستيراد مطابق. 

لبدء استكشاف أخطاء هذه العملية وإصلاحها، يكون مشروع التصدير والاستيراد هو مكان البدء. تأكد من إمكانية إكمال مشروع استيراد البيانات أو تصديرها، وتأكد من نجاح التنفيذ. في حالة فشل تنفيذ مشروع استيراد بيانات أو تصديرها، يجب البحث عن المشكلات المعروفة أو سجلات الأحداث المرتبطة بالخدمة. 

تُعد إعادة تشغيل الخدمة من Microsoft Dynamics 365 Lifecycle Services لبيئة تطبيقات التمويل والعمليات خطوة شائعة لحل المشكلات المتعلقة بإطار عمل الاستيراد والتصدير، بالإضافة إلى تأكيد تفاصيل تنفيذ المهام. 

إذا كان من الممكن استيراد مهام وحزم استيراد البيانات وتصديرها بنجاح، وكنت قد قمت بإصلاح المشكلات التي كانت موجودة، فيمكنك إعادة تشغيل تنفيذ حزم البيانات بالعثور عليها في شاشة **مساحة عمل إدارة البيانات > Dual-write**، مع تحديد علامة التبويب الخاصة بتفاصيل المزامنة الأولية من القائمة، ثم النقر بزر الماوس الأيمن لعرض خيارات إعادة التشغيل. 

يتوفر الخياران التاليان لإعادة التشغيل: 

- **إعادة تشغيل التنفيذ**، والذي سيعيد تشغيل المزامنة الأولية بأكملها للحزمة التي قمت بتحديدها لجميع عمليات التنفيذ.
- **إعادة تشغيل التنفيذ بدون أخطاء**، والذي سيقوم بتشغيل المزامنة الأولية للسجلات التي لم تكن موجودة في الحالة "توجد أخطاء" أو البيانات المفقودة. 

بالإضافة إلى ذلك، يمكنك تغيير القدرة على القيام بتوزيع كامل أو تزايدي لمزامنة أولية استنادًا إلى تعقب التغييرات وما إذا كان معطلاً أو ممكنًا. إذا كنت تريد أن يكون لديك عمليات توزيع تزايدية للبيانات التي تغيرت منذ آخر مرة تم فيها إجراء مزامنة أولية، فستحتاج إلى تمكين خيار تعقب التغييرات. وإلا، ففي حالة عدم رغبتك في إكمال هذا الإجراء، يمكنك تعطيل خيار تعقب التغييرات وسيقوم النظام بإجراء مزامنة أولية كاملة في المرة التالية التي يُطلب فيها ذلك. 

## <a name="self-referencing-field-issues"></a>مشكلات الحقول ذات المرجعية الذاتية
تعتبر أفضل طريقة لتفسير الحقول ذات المرجعية الذاتية هي تقديم مثال لذلك. 

|     **الحقل أ**    |     **الحقل ب**    |
|---|---|
|     القيمة 1    |     القيمة 3    |
|     القيمة 2    |     قيمة خالية    |
|     القيمة 3    |     القيمة 4    |
|     القيمة 4    |     القيمة 1    |

في هذا المثال، تشير القيمة الأولى لـ **الحقل ب** إلى القيمة الثالثة لـ **الحقل أ**. إذا أجريت مزامنة أولية باستخدام هذه البيانات، فسيفشل التمرير الأول لأن القيمة الثالثة في **الحقل أ** لم تتم مزامنتها؛ لذلك لا يمكن لـ **الحقل ب** ملء القيمة الثالثة. تكمل بعض التعيينات القياسية هذه العملية، حيث يوجد لديك جدول له سجلات ذات مرجعية ذاتية. 

لحل هذه المشكلة، اتبع الخطوات الآتية:

1.  قم بإزالة **الحقل ب** من التعيين.
2.  احفظ التعيين الجديد.
3.  قم بتعطيل تعقب التغييرات.
4.  قم بمزامنة التعيين مع بيانات الحقل أ فقط.

عند مزامنة **الحقل أ**، حينئذٍ يمكنك إضافة **الحقل ب** مجددًا في التعيين، بعد ذلك يمكنك إكمال عملية مزامنة أولية أخرى. بالنسبة للمزامنة التي تشتمل على **الحقل ب**، ستحتاج إلى التأكد من تمكين تعقب التغييرات ليتسنى لك مزامنة البيانات استنادًا إلى **الحقل أ**، والذي تم بالفعل تعيينه ومزامنته بنجاح إلى Dataverse. 

تشبه العملية الكاملة الخطوات التالية: 

1.  قم بإزالة الحقل ب من تعيين الجدول.
2.  احفظ تعيين الجدول الجديد كأحدث إصدار.
3.  قم بإزالة تعقب التغييرات.
4.  ابدأ المزامنة الأولية.
5.  بعد اكتمال المزامنة الأولية، قم بإيقاف التعيين.
6.  قم باستعادة التعيين إلى الإصدار السابق لإضافة الحقل ب مرة أخرى إلى التعيين.
7.  قم بتشغيل تعقب التغييرات.
8.  قم بمزامنة تعيين الجدول مرة أخرى. 

## <a name="filter-issues"></a>مشكلات عامل التصفية
في بعض الأحيان، عندما تقوم بإضافة عامل تصفية إلى كيان أو جدول، فمن المتوقع أن تتم تصفية المعلومات عند نقلها إلى الجدول الآخر. وللأسف، قد تحدث مشكلات حيث لن يظهر عامل التصفية في أحد الأنظمة أو في النظام الآخر بعد المزامنة الأولية. في العادة تحدث هذه المشكلة إذا كان بناء جملة عامل التصفية خاطئًا أثناء المزامنة الأولية، وسيتم تجاهله. للتأكد من عمل عوامل التصفية، ستحتاج إلى التحقق من صحة بناء جملة عامل التصفية. يجب التأكد من أنه يتم تطبيق عوامل التصفية فقط على الحقول الموجودة في تعيينات الكتابة المزدوجة. 

تتوفر فئة إضافية قابلة للتشغيل للتحقق من تعبير عامل التصفية في تطبيقات التمويل والعمليات، على النحو التالي: 

```X++:
var entityName = "PROJECTENTITY";
var filterExpression = '(ParentProject == "")';
Query query = new Query();
query.literals(NoYes::Yes); 
QueryBuildDataSource qbd = query.addDataSource(tablename2id(entityName));
qbd.addRange(fieldname2id(qbd.table(),identifierStr(RecVersion))).
value(filterExpression);
qbd.addSelectionField(fieldname2id(qbd.table(),identifierStr(RecId)));
QueryRun qRun = new QueryRun(query);
// This provides the actual sql statement to execute
var actualSqlStatement = query.getSQLStatement();
while(qRun.next())
{
    var rec = qRun.get(tableName2Id(entityName));
}
```

في حالة عودة الفئة القابلة للتشغيل بنتائج متوقعة، فإن عامل التصفية يعمل مع تطبيقات التمويل والعمليات وسيتمكن من التنقل عبر تعيين الكتابة المزدوجة وعملية المزامنة الأولية. على جانب Dataverse، إذا لم يعمل عامل تصفية أو تم تجاهله في تطبيقات التمويل والعمليات بعد إجراء المزامنة الأولية، فيمكنك إجراء استدعاء OData التالي للتأكد من أن عامل التصفية يعمل بشكل صحيح.

`https://<EnvironmentURL>/api/data/v9.0/<Table>?$filter=<fieldname> eq <value>`

إذا عاد هذا الاستدعاء بنتائج متوقعة، فسوف يعمل أثناء المزامنة الأولية بين الأنظمة. تحتوي التعيينات القياسية الجاهزة على عوامل تصفية، لذا نوصي بمقارنة عوامل التصفية المخصصة بهذه التعيينات القياسية لضمان أن بناء الجملة مماثل. 

## <a name="database-refresh"></a>تحديث قاعدة البيانات
تحديث قاعدة البيانات هو السيناريو الأكثر شيوعًا حيث تحدث أخطاء من Dataverse وتطبيقات التمويل والعمليات. عادة ما يكون السبب في ذلك هو وجود سجلات معزولة أو سجلات محذوفات من نظام أو آخر. بعد إجراء تحديث لقاعدة البيانات، نوصي بأن تقوم بإيقاف جميع التعيينات وإلغاء ربط البيئة من خلال مساحة عمل **الكتابة المزدوجة**. 

بعد إكمال العملية، احذف البيانات من الجداول الأساسية **DualWriteProjectConfiguration**، و **DualWriteProjectFieldConfiguration**، و **BusinessEventsDefinition** في تطبيقات التمويل والعمليات. يمكنك استخدام الجدول **DualWriteProjectConfigurationEntity** لمسح هذه السجلات من **عام > عام > تكامل Office > مصمم مصنف Excel**. 

على جانب Dataverse، يمكنك الانتقال إلى **إعدادات متقدمة > بحث متقدم**. حدد الخيار **تكوين وقت تشغيل Dual-write**، وحدد العمود الذي تريد عرضه، ثم حدد النتائج لعرض التكوينات. حدد السجلات ثم احذفها. 

عند الانتهاء، ستُظهر كلتا البيئتين أن البيانات قد تمت إزالتها من تلك المناطق. حينئذٍ، يكون قد حان الوقت لإعادة إجراء المزامنة وإعادة ربط البيئتين وتمكين التعيينات مرة أخرى. سيؤدي هذا النهج إلى إزالة السجلات المعزولة أو المفقودة في البيئتين لضمان عمل المزامنة بشكل صحيح. 
