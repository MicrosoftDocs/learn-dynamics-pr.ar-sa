---
ms.openlocfilehash: 2c0b133dd1a172c73a9069fa3b2564498a297104
ms.sourcegitcommit: 8773c31cceaa4d9a36c62c964a2b414c6e0656f3
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 08/13/2021
ms.locfileid: "7457416"
---
## <a name="event-framework-overview"></a>نظرة عامة على إطار عمل الحدث

يعرض Microsoft Dataverse الأحداث للإشارة إلى المكان الذي تنفذ فيه العملية حاليًا إطار العمل Pipeline-Wise. يمكننا معالجة هذه الأحداث لإجراء أشياء مثل التحقق من صحة البيانات أو منع العمليات من الاكتمال أو أتمتة أي نوع من منطق الأعمال التي لا يمكنك تنفيذها بواسطة وسائل تعريفية.

يمكننا الاشتراك في هذه الأحداث عن طريق تسجيل تجميعات ‏‎.NET (تسمى مكونات إضافية) لتنفيذ المنطق كلما تم إجراء الحدث المحدد. يتم إجراء التسجيل باستخدام أداة تسمى "أداة تسجيل المكون الإضافي". لمزيد من المعلومات حول "أداة تسجيل المكون الإضافي"، راجع [تسجيل برنامج تعليمي للمكون الإضافي](/powerapps/developer/common-data-service/register-plug-in/?azure-portal=true).

على مستوى عالٍ، تتضمن معالجة الأحداث ثلاثة أشياء. أولاً، يجب أن نشترك في رسالة محددة تمثل نوع العملية (أو الحدث) التي تحدث حاليًا (أو على وشك الحدوث) مثل "الإنشاء والاسترداد والتحديث" وما إلى ذلك. كما يجب علينا بعد ذلك الإشارة إلى المكان الموجود في البنية الأساسية لذلك الحدث والذي نرغب في تنفيذ منطقنا فيه (أي قبل العملية أو بعدها). ويمكننا أيضًا معالجة الأحداث قبل حدوث التحقق، وهي طريقة ملائمة يمكنك استخدامها لتنفيذ منطق تحقق متقدم لا يمكنك إنجازه عبر قواعد العمل أو مهام سير العمل. وأخيرًا، نحتاج إلى الإشارة إلى وضع التنفيذ الذي نرغب في تشغيل منطقنا فيه (بشكل متزامن أو غير متزامن).

لندخل الآن في هذه المجالات الثلاثة بمزيد من التفصيل.

## <a name="event-messages"></a>رسائل الأحداث

يعرض Dataverse العديد من الرسائل التي يتم نشرها عند حدوث عمليات بيانات متعددة. لمزيد من المعلومات حول هذه الرسائل، راجع [استخدام الرسائل مع خدمة المؤسسة](/powerapps/developer/common-data-service/org-service/use-messages/?azure-portal=true).

تتمثل عمليات البيانات الأساسية المعروضة بواسطة Dataverse في:

-   الإنشاء

-   الاسترداد

-   استرداد العديد

-   التحديث

-   حذف

-   الإقران‬

-   ‏‫إلغاء الإقران‬

وهناك أيضًا العديد من الرسائل التي يتم عرضها حسب السياق، اعتمادًا على نوع الجدول الذي تتعامل معه. على سبيل المثال، إذا كان الجدول به عمود "القيمة المحتسبة"، فيمكنني تنفيذ معالج الأحداث على رسالة الحدث "حساب حقل القيمة المحتسبة".

بشكل عام، يمكننا العثور على مخزون لهذه الرسائل المخصصة التي تم توفيرها عبر Dataverse من خلال البحث عبر [مساحة الاسم Microsoft.Sdk.Messages](/dotnet/api/microsoft.xrm.sdk.messages?view=dynamics-general-ce-9/?azure-portal=true) لأي فئات ينتهي اسمها في *\طلب*. وتوجد طريقة أخرى لمعرفة الرسائل المتوفرة لنوع معين من الجداول وهي التنقل في مجموعات الرسائل والجدول عبر "أداة تسجيل المكون الإضافي".

كما يمكننا إنشاء الرسائل الخاصة بنا وعرضها عن طريق إنشاء *إجراءات* مخصصة. لمزيد من المعلومات حول الإجراءات، راجع [إنشاء إجراءات خاصة بك](/powerapps/developer/common-data-service/custom-actions/?azure-portal=true).

## <a name="event-pipeline"></a>مسار الحدث

بالإضافة إلى الاشتراك في رسالة محددة أو نوع حدث، يعرض Dataverse أيضًا طريقة لتحديد المكان الذي يتم فيه تنفيذ الحدث حاليًا في المسار. بالنسبة إلى مطوري ASP.NET، يمكنك التفكير في هذا مثل كيفية تعاملنا مع دورات حياة الصفحة داخل تطبيق الويب. يُعد هذا نمط تطوير شائع لبنيات النشر والاشتراك، ويجب أن يبدو مألوفًا للمطورين ذوي الخبرة في أطر عمل الأحداث الأخرى.

### <a name="prevalidation-event"></a>حدث "التحقق المسبق"

يتم إجراء حدث "التحقق المسبق" أولاً في المسار، قبل تنفيذ أي عمليات فحص الأمان. وهي مخصصة للاستخدام لضمان أن المستخدم الذي يقوم بتنفيذ الحركة الحالية لديه الأذونات الصحيحة المطلوبة لتنفيذ العملية المقصودة.

بصفتك مطورًا، يمكنك استخدام هذا الحدث لتشغيل منطق تحقق وإلغاء العملية قبل حدوث الحركة. على سبيل المثال، إذا تم تكوينه للتشغيل كلما تم تحديث جدول، فلديك القدرة على إلغاء العملية قبل حدوث التحديث عن طريق طرح طريقة *InvalidPluginExecutionException* ضمن منطق تنفيذ المكون الإضافي الخاص بك. لمزيد من المعلومات حول سياق التنفيذ، راجع [فهم سياق التنفيذ](/powerapps/developer/common-data-service/understand-the-data-context/?azure-portal=true).

### <a name="preoperation-event"></a>حدث "التشغيل المسبق"

استخدم هذا الحدث إذا أردت تغيير أي قيم من الجدول قبل حفظه.

### <a name="postoperation-event"></a>حدث "التشغيل اللاحق"

استخدم هذا الحدث لتعديل أي من خصائص الرسالة قبل إرجاعها إلى المتصل. تأكد من عدم تطبيق أي تحديثات للجدول المطابق في هذه المرحلة حيث سيؤدي ذلك إلى تشغيل حدث تحديث آخر!

## <a name="execution-modes-synchronous-versus-asynchronous"></a>أوضاع التنفيذ (متزامن مقابل غير متزامن)

يمكنك تكوين المكونات الإضافية للتشغيل بشكل متزامن أو غير متزامن، اعتمادًا على نوع تشغيل المسار الذي يتم التعامل معه.

### <a name="synchronous-mode"></a>الوضع "متزامن"

سيتم تشغيل المكونات الإضافية المسجلة في هذا الوضع بمجرد الوصول إلى مرحلة مسار التنفيذ الخاص بها، ولن تتم متابعة العملية بأكملها حتى يكمل المنطق التنفيذ. في حالة تسجيل مكونات إضافية متعددة لتعمل مقابل مرحلة المسار نفسها، ستحدد السمة "أمر التنفيذ" (المحددة من خلال "أداة تسجيل المكون الإضافي") أي منها تعمل أولاً.

### <a name="asynchronous-mode"></a>الوضع "غير متزامن"

يتم إرسال المكونات الإضافية المسجلة في هذا الوضع كوظيفة نظام إلى الخدمة غير المتزامنة، والتي تنفذ منطقها بعد اكتمال العملية المحددة. لمزيد من المعلومات حول كيفية عمل وظائف النظام، راجع [خدمة غير متزامنة](/powerapps/developer/common-data-service/asynchronous-service/?azure-portal=true).

> [!NOTE]
> يمكنك فقط تسجيل مكونات إضافية للمرحلة **التشغيل اللاحق** في "مسار الحدث".
 
