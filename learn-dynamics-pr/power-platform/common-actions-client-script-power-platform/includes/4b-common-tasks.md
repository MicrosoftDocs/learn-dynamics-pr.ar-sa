---
ms.openlocfilehash: abdc6996ad99df04d8837f12117181e1c82f0007
ms.sourcegitcommit: 638bab9b0642ad3d3698e559bdfe044fb14354f7
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 04/05/2022
ms.locfileid: "8548401"
---
نموذج كائن واجهة برمجة التطبيقات الخاص بالعميل يعد شاملاً وثريًا. عندما تبدأ في التعرف على البرمجة النصية للعميل، ستدرك أن هناك العديد من كائنات وطرق واجهة برمجة التطبيقات (API) التي يمكنك استخدامها. في هذا الموضوع، سنلقي\'نظرة على بعض المهام الشائعة التي ستنفذها والأساليب التي يمكن استخدامها لإنجازها.

## <a name="accessing-dataverse-column-data"></a>الوصول إلى بيانات عمود Dataverse

يتم تمثيل عمود Dataverse في نموذج الكائن باعتباره كائن سمة. ويمكنك استخدام طريقة getAttribute() لكائن formContext لتحديد موقع السمة المحددة أو كافة السمات الموجودة في النموذج بسرعة. يتضمن كل كائن سمة بعض الطرق الشائعة [الطرق الأخرى](/power-apps/developer/model-driven-apps/clientapi/reference/attributes/?azure-portal=true) وفقًا لنوع بيانات السمة.

> [!NOTE]
> تفترض عينة الكود الوارد أدناه وجود السمات وعناصر التحكم المستخدمة. ستقوم معظم الطرق بإرجاع **‏‫قيمة فارغة‬** إذا كانت الكائنات غير متوفرة ويجب استخدام عمليات الفحص الدفاعية المعتادة في التدريب العملي.

> [!TIP]
> تحتوي المجموعات التي يتم إرجاعها بواسطة طرق واجهة برمجة تطبيقات (API) الخاصة بالعميل على بعض الطرق المفيدة التي يمكنك استخدامها للتكرار خلال العناصر. راجع [المجموعات (مرجع واجهة برمجة التطبيقات (API) الخاصة بالعميل) في التطبيقات المستندة إلى النموذج- Power Apps](/power-apps/developer/model-driven-apps/clientapi/reference/collections/?azure-portal=true) للحصول على مزيد من المعلومات.

|     المهمة                     |     مثال                                                                                                                                                                                                                                 |
|------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|     الوصول بحسب الاسم           |     ```csharp var   nameAttribute = formContext.getAttribute("name");```     يقوم بتعيين السمة للعمود **اسم الحساب** إلى المتغير **nameAttribute**. في حالة عدم وجود سمة في النموذج، تقوم طريقة **getAttribute** بإرجاع قيمة **فارغة**.     |
|     الوصول إلى جميع السمات    |     ```csharp var   allAttributes = formContext.getAttribute();``` يقوم بتعيين صفيف من جميع السمات الموجودة في مجموعة **formContext.data.entity.attributes** إلى متغير **allAttributes**.                                                    |

## <a name="using-attributes"></a>استخدام السمات

|     المهمة                                                                                                                                                                              |     مثال                                                                                                                                                                                                                                          |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|     الحصول على قيمة السمة                                                                                                                                                   |     ```csharp var nameValue   = formContext.getAttribute("name").getValue();```     يقوم بتعيين القيمة للعمود **اسم الحساب** إلى المتغير **nameAttribute**.                                                                                                     |
|     تعيين قيمة السمة                                                                                                                                                   |     ```csharp formContext.getAttribute("name").setValue("new   name");``` يقوم بتعيين قيمة عمود **اسم الحساب** إلى "الاسم الجديد".                                                                                                                          |
|     الحصول على كائن الخيار المحدد حاليًا في سمة OptionSet (تصف سمة OptionSet عمود اختيار Dataverse)                                                |     ```csharp var   addressTypeOption = formContext.getAttribute("address1_addresstypecode").getSelectedOption();``` يقوم بتعيين الخيار المحدد في عمود **نوع العنوان** إلى متغير **addressTypeOption**.                                            |
|     تحديد ما إذا كانت قيمة السمة قد تغيرت في واجهة المستخدم منذ فتح النموذج                                                                         |     ```csharp var   isNameChanged = formContext.getAttribute("name").getIsDirty();``` يقوم بتعيين قيمة منطقية تشير إلى ما إذا كانت قيمة عمود **اسم الحساب** قد تغيرت إلى المتغير **isNameChanged‎**.                                             |
|     تغيير ما إذا كانت البيانات مطلوبة في عمود من أجل حفظ سجل                                                                                                           |     ```csharp formContext.getAttribute("creditlimit").setRequiredLevel("required");``` يجعل عمود **حد الائتمان** مطلوبًا.     ```csharp formContext.getAttribute("creditlimit").setRequiredLevel("none");``` يجعل عمود **حد الائتمان** اختياريًا.          |
|     تحديد ما إذا كان سيتم إرسال البيانات الموجودة في إحدى السمات عند حفظ السجل                                                                                           |     ```csharp var   nameSubmitMode = formContext.getAttribute("name").getSubmitMode();```     ستكون قيمة المتغير **nameSubmitMode**  نصًا إما **دائمًا أو مطلقًا أو غير نظيف** لتمثيل **submitMode** من أجل العمود **Account Name**.                          |
|     التحكم في ما إذا كان سيتم حفظ البيانات الموجودة في إحدى السمات عند حفظ السجل                                                                                                     |     ```csharp formContext.getAttribute("name").setSubmitMode("always");``` سيفرض المثال قيمة عمود **اسم الحساب** ليتم دومًا حفظها حتى في حالة عدم تغيرها.                                                                          |
|     عند تطبيق أمان مستوى العمود على سمة ما، حدد ما إذا كان المستخدم لديه امتيازات لإجراء عمليات الإنشاء أو القراءة أو التحديث على السمة.    |     ```csharp var   canUpdateNameAttribute = formContext.getAttribute("name").getUserPrivilege().canUpdate;``` يقوم بتعيين القيمة المنطقية التي تمثل امتياز المستخدم لتحديث عمود **اسم الحساب** إلى المتغير canUpdateNameAttribute.     |

## <a name="accessing-form-controls"></a>الوصول إلى عناصر تحكم النماذج

|     المهمة                                                  |     مثال                                                                                                                                                                                                                                                                                                                                         |
|-----------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|     الوصول إلى جميع عناصر التحكم الخاصة بسمة محددة    |     ```csharp var   nameControls = formContext.getAttribute("name").controls.get();``` يقوم بتعيين صفيف من جميع عناصر التحكم الخاصة بسِمة **الاسم** إلى المتغير **nameControls‎**. يتم تمثيل معظم السمات بعنصر تحكم واحد، ولكن قد يكون هناك أكثر من عمود واحد في حالة إضافة عمود إلى النموذج أكثر من مرة.                           |
|     الوصول إلى عنصر تحكم بالاسم                            |     ```csharp var   nameControl = formContext.getControl("name");``` عنصر التحكم الأول المضاف إلى نموذج لعمود سيكون له نفس اسم العمود. سيكون لكل اسم عنصر تحكم إضافي رقم فهرس ملحق بالاسم. على سبيل المثال، ثلاثة عناصر تحكم لعمود الاسم سيكون لها الأسماء: **name وname1 وname2** على التوالي.    |
|     الوصول إلى جميع عناصر التحكم                                   |     ```csharp var   allControls = formContext.getControl();``` يقوم بتعيين صفيف من جميع عناصر التحكم الموجودة في مجموعة **formContext.ui.controls** إلى متغير **allControls‎**.                                                                                                                                                                               |

## <a name="use-form-controls"></a>استخدام عناصر تحكم النماذج

كائنات التحكم مثل كائنات السمات تتضمن مجموعة شائعة من الطرق بغض النظر عن النوع. كما أنها تتضمن [طرقًا متخصصة](/power-apps/developer/model-driven-apps/clientapi/reference/controls/?azure-portal=true) استنادًا إلى نوع عنصر التحكم.

|المهمة  |مثال  |
|---------|---------|
|تحديد ما إذا كان عنصر التحكم مرئيًا     |  ```csharp var   isNameVisible = formContext.getControl("name").getVisible();``` يقوم بتعيين قيمة **منطقية** إلى متغير **isNameVisible‎** الذي يمثل ما إذا كان عمود **اسم الحساب** مرئيًا أم لا.       |
|إخفاء عنصر تحكم أو إظهاره     |  ```csharp formContext.getControl("name").setVisible(false);``` يقوم بإخفاء عمود **اسم الحساب**.       |
|الحصول على مرجع إلى سمة عنصر التحكم      | ```csharp var   nameAttribute = formContext.getControl("name").getAttribute();```     يقوم بتعيين السمة لعنصر التحكم لعمود **اسم الحساب** إلى المتغير **nameAttribute**.                             |
|تعطيل أو تمكين جميع عناصر التحكم لإحدى السمات     | ```csharp formContext.getAttribute("name").controls.forEach(function   (control, index) { control.setDisabled(true); });``` تذكر أن أي سمة قد تتضمن عناصر تحكم متعددة.        |
|تغيير تسمية عنصر تحكم     | ```csharp formContext.getControl("name").setLabel("Company   Name");``` يقوم بتعيين تسمية عمود **اسم الحساب** إلى نص **اسم الشركة**.        |
|الحصول على أصل عنصر تحكم     |  ```csharp var   parentSection = formContext.getControl("name").getParent();``` يقوم بتعيين عنصر التحكم الأصلي للعمود **اسم الحساب** إلى المتغير **parentSection‎**.        |
|تعيين التركيز على عنصر تحكم     | ```csharp formContext.getControl("name").setFocus();``` يقوم بتعيين تركيز الإدخال الحالي إلى عمود **اسم الحساب**.        |

## <a name="use-tabs-and-sections"></a>استخدام علامات التبويب والأقسام

يحتوي كل نموذج على مجموعة من علامات التبويب. وتحتوي كل علامة تبويب على مجموعة من الأقسام. ويحتوي كل قسم على مجموعة من عناصر التحكم. يمكنك برمجيًا الوصول إلى هذه العناصر واستخدام الطرق الخاصة بها.

|     المهمة                            |     مثال                                                                                                                           |
|-------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------|
|     إظهار علامة تبويب أو إخفاؤها              |     ```csharp formContext.ui.tabs.get("general").setVisible(false);``` يقوم بإخفاء علامة التبويب **عام**.                                                      |
|     تغيير تسمية علامة تبويب    |     ```csharp formContext.ui.tabs.get("general").setLabel("Major"); ``` يقوم بتعيين تسمية علامة تبويب **عام** إلى نص **رئيسي**.                  |
|     إظهار قسم أو إخفاؤه          |     ```csharp formContext.getControl("industrycode").getParent().setVisible(false);``` يقوم بإظهار قسم يحتوي على عمود **كود الصناعة**.    |

## <a name="use-entity-data"></a>استخدام بيانات الكيان

يحتوي الجدول الآتي على طرق يمكنك استخدامها للحصول على معلومات حول السجل الحالي.

|     المهمة                                                              |     مثال                                                                                                                                                                                                |
|-----------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|     الحصول على *معرّف* للسجل الحالي                                |     ```csharp var recordId =   formContext.data.entity.getId();``` يقوم بتعيين معرف فريد للسجل الحالي إلى متغير **recordId‎**. إذا تم فتح النموذج لإنشاء سجل جديد، فيتم إرجاع قيمة **فارغة**.    |
|     حفظ السجل الحالي                                         |     ```csharp formContext.data.entity.save();``` استخدم **saveandclose‎** أو **saveandnew‎** لتنفيذ الإجراءات المكافئة باستخدام **حفظ وإغلاق** أو **حفظ وجديد**                                                    |
|     حدد تغيير أي بيانات في السجل الحالي من عدمه.    |     ```csharp var isDirty = formContext.data.entity.getIsDirty();``` يقوم بتعيين قيمة منطقية تشير إلى ما إذا كانت أي قيمة عمود في النموذج قد تغيرت إلى المتغير **isDirty**.                       |