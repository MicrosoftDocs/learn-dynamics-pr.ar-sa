---
ms.openlocfilehash: a95c7098ee655d129251aa90d2cffd4f14d0bd0b
ms.sourcegitcommit: 8773c31cceaa4d9a36c62c964a2b414c6e0656f3
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 08/13/2021
ms.locfileid: "7457514"
---
يوفر Microsoft Dataverse مجموعة متنوعة من الآليات سابقة الإنشاء لإخراج بياناته لأغراض التكامل. يتناول هذا الدرس كيفية إتمام عرض بيانات Dataverse إلى ناقل خدمة Azure باستخدام ميزة تسجيل نقطة نهاية الخدمة الخاصة بـ Dataverse، والموجودة في أداة تسجيل المكونات الإضافية.

## <a name="set-up-your-azure-service-bus-environment"></a>إعداد بيئة ناقل خدمة Azure الخاصة بك

أنشئ مساحة اسم ناقل خدمة Azure وصف الرسائل بالخطوات التالية.

1.  سجل الدخول إلى مدخل [Azure](https://portal.azure.com/?azure-portal=true).

2.  في جزء التنقل الأيمن من البوابة الإلكترونية، حدد **+ إنشاء مورد**، وحدد **تكامل**، ثم حدد **ناقل الخدمة**.

    ![لقطة شاشة لـ + إنشاء مورد وخيارات التكامل وناقل الخدمة.](../media/unit2-image1.png)

3.  أدخل التفاصيل المناسبة لمساحة الاسم الخاصة بك ثم حدد **إنشاء**.

    ![لقطة شاشة للتفاصيل المناسبة لمساحة الاسم وزر الإنشاء.](../media/unit2-image2.png)

    قد يستغرق توفير الموارد بضع دقائق. عند الانتهاء، من المفترض أن ترى شيئاً مشابهاً للصورة التالية في منطقة **الإخطارات** في مدخل Azure الخاص بك:

    ![لقطة شاشة لمنطقة الإخطارات مع رسالة نجاح النشر.](../media/unit2-image3.png)

4.  بعد إنشاء المورد الخاص بك، انتقل إلى مساحة الاسم التي تم إنشاؤها حديثاً لإنشاء صف جديد.

    ![لقطة شاشة لعملية إنشاء صف جديد.](../media/unit2-image4.png)

5.  لاحظ بعض الأصناف الموجودة في مساحة الاسم الخاصة بك بحيث يحتوي Dataverse على بيانات الاعتماد الصحيحة للاتصال بالصف الجديد. بالنسبة لهذا الإجراء، استخدم نهج الوصول المشترك الحالي الذي تم إنشاؤه تلقائياً كجزء من مساحة الاسم الخاصة بك. إذا كنت تريد المزيد من قيود الوصول، يمكنك إنشاء سياسة وصول مشترك للصف الفردي الخاص بك أيضاً.

    ![لقطة شاشة لسياسات الوصول المشترك وتفاصيل السياسة.](../media/unit2-image5.png)

7.  من داخل سياسة الوصول المشترك، انسخ **سلسلة الاتصال الأساسية** وقم بتخزينها للاستخدام المستقبلي لأنك ستحتاج إلى هذه السلسلة كجزء من تكوين نقطة نهاية ناقل الخدمة في Dataverse:

    ![لقطة من زر النسخ إلى الحافظة.](../media/unit2-image6.png)

## <a name="register-service-bus-endpoint-in-dataverse"></a>تسجيل نقطة نهاية ناقل الخدمة في Dataverse

الآن بعد أن أعددت صف الرسائل في Azure، يمكنك توفير Dataverse بمعلومات التكوين المطلوبة للوصول إليها.

> [!NOTE]
> ستستخدم أداة تسجيل المكونات الإضافية لـ Dataverse لتكوين نشر بيانات Dataverse إلى ناقل الخدمة. يتم توفير هذه الأداة كجزء من أدوات مطور Dataverse، والتي توجد في NuGet. لمزيد من المعلومات حول كيفية تثبيت أداة تسجيل المكونات الإضافية من خلال NuGet، راجع [تنزيل الأدوات من NuGet](/powerapps/developer/common-data-service/download-tools-nuget).

1.  افتح أداة تسجيل المكون الإضافي واتصل ببيئة Dataverse الخاصة بك.

2.  عند الاتصال بالبيئة، قم بتسجيل نقطة نهاية ناقل الخدمة الخاصة بك عن طريق تحديد **تسجيل** ثم تحديد **تسجيل نقطة نهاية خدمة جديدة**.

    ![لقطة شاشة لتسجيل وتسجيل قيم نقطة نهاية الخدمة الجديدة.](../media/unit2-image7.png)

3.  انسخ والصق قيمة **سلسلة الاتصال الأساسية** التي أشرت إليها سابقاً عند إعداد مثيل ناقل الخدمة، ثم حدد **التالي**.

    ![لقطة شاشة لقيمة سلسلة الاتصال الأساسية.](../media/unit2-image8.png)

4.  يجب ملء جميع الحقول من سلسلة الاتصال الخاصة بك مسبقاً في النموذج. في هذا المثال، ستكتب ناشراً أحادي الاتجاه في الصف، لذا يمكنك ترك **نوع التعيين** **كصف**. يدعم Dataverse العديد من أنواع التعيين الأخرى لدعم بروتوكولات المراسلة المختلفة.

    أدخل اسم الصف الخاص بك في حقل **اسم الصف** وحدد **تنسيق الرسالة** كـ **JSON**. يدعم Dataverse تنسيقات رسائل .NETBinary وJSON وXML. أنت تستخدم JSON لهذه الرسالة لأنها أصبحت تنسيق رسائل قياسياً صناعياً نظراً لإمكانية نقلها وطبيعتها خفيفة الوزن. أخيراً، لإرسال معلومات المستخدم الخاصة بك إلى الصف الخاصة بك، يمكنك تحديد **معرّف المستخدم** في القائمة المنسدلة **معلومات المستخدم المرسلة**.

    ![لقطة شاشة لتفاصيل تسجيل نقطة نهاية الخدمة.](../media/unit2-image9.png)

## <a name="register-a-service-bus-integration-step"></a>تسجيل خطوة تكامل ناقل الخدمة

في هذا السيناريو، ستقوم بتسجيل خطوة تكامل تنشر رسالة إلى صف "ناقل الخدمة" في كل مرة يتم فيها إنشاء حساب. بتسجيل خطوة، يمكنك تحديد الكيان ومجموعة الرسائل، ويمكنك تحديد الشروط التي ستؤدي إلى إرسال الرسالة التي تتم معالجتها بواسطة Dataverse على ناقل الخدمة إلى قائمه صف Azure.

1.  قم بتسجيل خطوة جديدة لنقطة نهاية الخدمة الخاصة بك عن طريق النقر بزر الماوس الأيمن وتحديد **تسجيل خطوة جديدة**.

2.  أدخل التفاصيل التالية لتسجيل خطوة تكامل جديدة ستبدأ عند إنشاء سجل حساب. تأكد من مسح **علامة حذف AsyncOperation إذا كان رمز الحالة = ناجح**. يعد مسح هذه العلامة لأغراض الاختبار فقط، لذا يمكنك التحقق من أن سجلات وظائف النظام التي تم إنشاؤها تُظهر أن خطوة تكامل ناقل الخدمة قد بدأت بنجاح عند إنشاء سجل حساب. في سيناريو إنتاج في العالم الحقيقي، نوصي بترك هذه القيمة محددة.

    ![لقطة شاشة لتسجيل تفاصيل الخطوة الجديدة.](../media/unit2-image10.png)

## <a name="test-your-service-bus-integration"></a>اختبار تكامل ناقل الخدمة

اختبر تكامل ناقل الخدمة من خلال الخطوات التالية:

1.  لاختبار تكامل "ناقل الخدمة" الخاص بك، انتقل إلى بيئة Dataverse وأنشئ حسابًا.

2.  لمعرفة ما إذا كان التكامل قد تم تشغيله، انتقل إلى **الإعدادات> الإعدادات المتقدمة** وحدد عرض **وظائف النظام**.

    ![لقطة شاشة لمنطقة الإعدادات> الإعدادات المتقدمة.](../media/unit2-image11.png)

3.  انتقل إلى عرض **وظائف النظام** من خلال الانتقال إلى **الإعدادات> وظائف النظام**.

    ![لقطة شاشة للإعدادات> الإعدادات> وظائف النظام.](../media/unit2-image12.png)

4.  تحقق من تنفيذ خطوة التكامل بنجاح من خلال عرضها في عرض **وظائف النظام**. إذا تم تشغيله بنجاح، فيجب أن يكون **سبب الحالة** **نجاح**. ستستخدم أيضاً طريقة العرض هذه لاستكشاف أخطاء التكامل التي يتم تشغيلها وإصلاحها في حالة حدوث خطأ. في حالة الفشل، افتح سجل مهمة النظام لعرض معلومات الخطأ.

    ![نجحت لقطة شاشة لخطوة التكامل في وظائف النظام.](../media/unit2-image13.png)

5.  نظراً لتشغيل خطوة التكامل بنجاح، يمكنك الآن التحقق من وصول رسالة إنشاء الحساب إلى صف ناقل الخدمة بالانتقال إلى الصف في مدخل Azure.

    ![لقطة شاشة لرسالة إنشاء الحساب في صف ناقل الخدمة.](../media/unit2-image14.png)

